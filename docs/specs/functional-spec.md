# 기능 요구사항 (쪼개부기)

## 목차

- [계정](#계정)
  - [ACC-001 이메일 회원가입](#acc-001)
  - [ACC-002 이메일 중복 / 형식검증](#acc-002)
  - [ACC-003 이메일 인증 / 계정 활성화](#acc-003)
  - [ACC-004 로그인 (이메일 / 비밀번호)](#acc-004)
  - [ACC-005 소셜로그인 (구글 / 카카오)](#acc-005)
  - [ACC-006 로그아웃](#acc-006)
  - [ACC-007 비밀번호 재설정(찾기)](#acc-007)
  - [ACC-008 계정 상태 / 잠금 관리](#acc-008)
- [자산관리](#자산관리)
  - [AST-001 자산/부채 목록 및 순자산 요약](#ast-001)
  - [AST-002 자산/부채 그룹 관리](#ast-002)
  - [AST-003 자산 등록(추가)](#ast-003)
  - [AST-004 자산 정보 수정/삭제](#ast-004)
  - [AST-005 자산/그룹 순서 드래그앤드롭](#ast-005)
  - [AST-006 신용카드 상세 관리](#ast-006)
  - [AST-007 순자산 반영 토글 로직](#ast-007)
  - [AST-008 거래 연동 잔액 자동 업데이트](#ast-008)
  - [AST-009 자산 비활성화/숨김 (선택)](#ast-009)
- [금융연동](#금융연동)
  - [BNK-001 금융사 목록 조회/선택](#bnk-001)
  - [BNK-002 금융사 인증 플로우 (연결)](#bnk-002)
  - [BNK-003 초기 거래 내역 가져오기](#bnk-003)
  - [BNK-004 정기 자동 동기화 스케줄러 관리](#bnk-004)
  - [BNK-005 연동 거래 중복/정합성 검증](#bnk-005)
  - [BNK-006 연동 상태/오류 표시 및 재연결 UI](#bnk-006)
  - [BNK-007 자동 카테고리 추천(룰/모델)](#bnk-007)
  - [BNK-008 카테고리 수정 시 규칙 학습/업데이트](#bnk-008)
  - [BNK-009 미분류/자동연동 거래 확인 화면](#bnk-009)
  - [BNK-010 연동 해제/재연동 처리](#bnk-010)
- [예산](#예산)
  - [BUD-001 예산 기준 선택](#bud-001)
  - [BUD-002 예산 항목 구조/계층 관리](#bud-002)
  - [BUD-003 예산 금액 입력 로직](#bud-003)
  - [BUD-004 예산 편의 기능 (복사/초기화)](#bud-004)
  - [BUD-005 연간 비정기 지출 관리](#bud-005)
  - [BUD-006 예산 이월 정책 설정](#bud-006)
  - [BUD-007 이월 금액 자동 계산/적용](#bud-007)
- [카테고리관리](#카테고리관리)
  - [CAT-001 수입/지출 카테고리 탭 전환](#cat-001)
  - [CAT-002 카테고리 계층 목록 표시](#cat-002)
  - [CAT-003 대분류 카테고리 추가](#cat-003)
  - [CAT-004 소분류 카테고리 추가](#cat-004)
  - [CAT-005 카테고리 이름 인라인 수정](#cat-005)
  - [CAT-006 카테고리 삭제 및 미분류 정책](#cat-006)
  - [CAT-007 카테고리 순서 변경 및 이동](#cat-007)
  - [CAT-008 기본 카테고리 제공/초기화](#cat-008)
  - [CAT-009 거래 입력 화면과 실시간 동기화](#cat-009)
  - [CAT-010 “미분류” 카테고리 관리](#cat-010)
- [데이터관리](#데이터관리)
  - [DTM-001 거래 데이터 CSV 내보내기](#dtm-001)
  - [DTM-002 거래 데이터 CSV 가져오기](#dtm-002)
  - [DTM-003 Import 데이터 검증](#dtm-003)
  - [DTM-004 Import 오류 처리 및 저장 정책](#dtm-004)
- [목표관리](#목표관리)
  - [GOL-001 목표 목록 조회](#gol-001)
  - [GOL-002 목표 생성](#gol-002)
  - [GOL-003 목표 수정/삭제/상태 변경](#gol-003)
  - [GOL-004 목표 상세 보기](#gol-004)
  - [GOL-005 목표 진행도 시각화](#gol-005)
  - [GOL-006 목표와 자산 연동/기여 계산](#gol-006)
- [다국어/i18n](#다국어/i18n)
  - [I18-001 언어 선택 UI](#i18-001)
  - [I18-002 언어 설정 저장/로드](#i18-002)
  - [I18-003 프론트 i18n 리소스 로딩](#i18-003)
  - [I18-004 텍스트 리소스 구조/네이밍 규칙](#i18-004)
  - [I18-005 서버 검증/에러 메시지 다국어 처리](#i18-005)
  - [I18-006 날짜 형식 로컬라이제이션](#i18-006)
  - [I18-007 숫자/통화 표기 로컬라이제이션](#i18-007)
  - [I18-008 단위/형식 혼합 표시 규칙 정의](#i18-008)
  - [I18-009 URL/라우팅 다국어 처리(선택)](#i18-009)
  - [I18-010 언어 전환 UX(헤더 스위처 등)](#i18-010)
- [모니터링](#모니터링)
  - [OPS-001 에러/성능 로그 수집/저장](#ops-001)
  - [OPS-002 운영자용 상태 대시보드/알림](#ops-002)
- [포인트/상점](#포인트/상점)
  - [PNT-001 포인트 규칙 정의/관리](#pnt-001)
  - [PNT-002 포인트 적립 처리(이벤트 기반)](#pnt-002)
  - [PNT-003 포인트 차감 처리(사용/구매 시)](#pnt-003)
  - [PNT-004 상점 상품 목록 조회](#pnt-004)
  - [PNT-005 상점 상품 상세 조회](#pnt-005)
  - [PNT-006 상점 상품 구매 처리](#pnt-006)
  - [PNT-007 포인트 요약 정보 표시](#pnt-007)
  - [PNT-008 포인트 적립/사용 내역 리스트](#pnt-008)
  - [PNT-009 포인트 알림/피드백(토스트/뱃지)](#pnt-009)
  - [PNT-010 아이템 적용/해제 관리](#pnt-010)
- [반복거래](#반복거래)
  - [REC-001 반복 거래 규칙 생성/관리](#rec-001)
  - [REC-002 반복 거래 스케줄 실행](#rec-002)
  - [REC-003 반복 거래 사전 알림](#rec-003)
  - [REC-004 반복 규칙 일시중단/재개](#rec-004)
  - [REC-005 생성된 반복 거래 예외 관리](#rec-005)
- [보고서/분석](#보고서/분석)
  - [RPT-001 대시보드 레이아웃 & 위젯 구성](#rpt-001)
  - [RPT-002 대시보드 데이터 실시간 반영](#rpt-002)
  - [RPT-003 예산 예측 메시지 로직](#rpt-003)
  - [RPT-004 자산 보고서 (자산/부채/순자산)](#rpt-004)
  - [RPT-005 예산 보고서 (월별 예산 vs 지출)](#rpt-005)
  - [RPT-006 태그 리포트 (#프로젝트 단위)](#rpt-006)
  - [RPT-007 현금 흐름 예측 캘린더](#rpt-007)
  - [RPT-008 재무 건강 점수 계산](#rpt-008)
  - [RPT-009 재무 분석 & 개선 조언 메시지](#rpt-009)
  - [RPT-010 챌린지 현황 & 리워드 연동](#rpt-010)
  - [RPT-011 연간 재무 요약 리포트](#rpt-011)
  - [RPT-012 연도 간 비교 리포트](#rpt-012)
- [가계부설정](#가계부설정)
  - [SET-001 가계부 기본 정보 설정](#set-001)
  - [SET-002 가계부 월 시작일 설정](#set-002)
- [가계부공유](#가계부공유)
  - [SHR-001 가계부 멤버 목록 조회](#shr-001)
  - [SHR-002 가계부 초대 메일 발송](#shr-002)
  - [SHR-003 초대 수락/거절 처리](#shr-003)
  - [SHR-004 가계부 멤버 권한 변경/강퇴](#shr-004)
- [구독/플랜](#구독/플랜)
  - [SUB-001 플랜 정의(무료/프리미엄)](#sub-001)
  - [SUB-002 플랜 비교 페이지](#sub-002)
  - [SUB-003 플랜 기반 기능 접근 제어(백엔드)](#sub-003)
  - [SUB-004 기능 제한 업그레이드 유도 팝업](#sub-004)
  - [SUB-005 프리미엄 플랜 결제(체크아웃)](#sub-005)
  - [SUB-006 구독 상태 업데이트(웹훅 처리)](#sub-006)
  - [SUB-007 구독 관리 화면(상태/해지)](#sub-007)
  - [SUB-008 결제/구독 내역 조회](#sub-008)
  - [SUB-009 Free → Premium 업그레이드 후 처리](#sub-009)
  - [SUB-010 Premium → Free 다운그레이드 후 정리](#sub-010)
- [테마/개인화](#테마/개인화)
  - [THM-001 라이트/다크 모드 전환](#thm-001)
  - [THM-002 테마 선택 및 미리보기](#thm-002)
  - [THM-003 시스템 설정 연동(자동 모드)](#thm-003)
- [거래관리](#거래관리)
  - [TRN-001 거래 기본 입력/저장](#trn-001)
  - [TRN-002 거래 수정](#trn-002)
  - [TRN-003 거래 삭제](#trn-003)
  - [TRN-004 날짜·시간 입력/선택](#trn-004)
  - [TRN-005 금액 입력 및 포맷팅](#trn-005)
  - [TRN-006 카테고리 선택 (2단계)](#trn-006)
  - [TRN-007 자산 선택](#trn-007)
  - [TRN-008 태그 입력 및 자동완성](#trn-008)
  - [TRN-009 메모 입력](#trn-009)
  - [TRN-010 사진/영수증 첨부](#trn-010)
  - [TRN-011 영수증 스캔(OCR)](#trn-011)
  - [TRN-012 거래 쪼개기(Split)](#trn-012)
  - [TRN-013 거래 목록 조회(리스트)](#trn-013)
  - [TRN-014 거래 상세 보기](#trn-014)
  - [TRN-015 거래 달력 뷰](#trn-015)
  - [TRN-016 거래 필터/검색](#trn-016)
  - [TRN-017 거래 목록 무한 스크롤](#trn-017)
  - [TRN-018 공유 가계부 댓글](#trn-018)
  - [TRN-019 거래 기반 실시간 알림](#trn-019)
  - [TRN-029 거래 상세 액션(수정/삭제/복제/댓글)](#trn-029)
- [카드/할부](#카드/할부)
  - [CRD-001 카드 할부 거래 입력](#crd-001)
  - [CRD-002 할부 스케줄 분할 생성/관리](#crd-002)
  - [CRD-003 할부 현황 요약/리포트](#crd-003)
- [정산/모임](#정산/모임)
  - [STL-001 정산 그룹 생성 및 기본 설정](#stl-001)
  - [STL-002 정산 계산 로직](#stl-002)
  - [STL-003 정산 결과 공유/상태 관리](#stl-003)
  - [STL-004 정산 그룹 멤버 초대/관리](#stl-004)
- [거래템플릿](#거래템플릿)
  - [TMP-001 거래 템플릿 저장](#tmp-001)
  - [TMP-002 템플릿 선택/적용](#tmp-002)
  - [TMP-003 템플릿 관리(수정/삭제/정렬)](#tmp-003)
- [사용자](#사용자)
  - [USR-001 마이페이지 진입](#usr-001)
  - [USR-002 프로필, 닉네임, 비밀번호 변경](#usr-002)
  - [USR-003 내 가계부 관리](#usr-003)
  - [USR-004 메인 가계부 설정](#usr-004)
  - [USR-005 가계부 초대 수락 / 거절](#usr-005)
  - [USR-006 회원 탈퇴](#usr-006)
- [온보딩](#온보딩)
  - [UX-001 온보딩 튜토리얼 오버레이](#ux-001)
  - [UX-002 온보딩 – 초기 데이터 설정 유도](#ux-002)
- [알림](#알림)
  - [UX-003 리포트 알림 설정 (주간/월간)](#ux-003)
  - [UX-004 주간/월간 리포트 데이터 생성](#ux-004)
  - [UX-005 전역 토스트 알림 인프라 구축](#ux-005)
  - [UX-006 공통 API 오류 자동 토스트 처리](#ux-006)
  - [UX-007 성공/실패 사용자 피드백 표준화](#ux-007)
  - [UX-010 주간/월간 리포트 발송 스케줄/채널](#ux-010)
- [잠금](#잠금)
  - [UX-008 앱/웹 가계부 잠금 설정](#ux-008)
  - [UX-009 잠금 화면 인증](#ux-009)

---

## 계정

### ACC-001

- 기능명: 이메일 회원가입
- 기능 상세설명:
  - 사용자가 이메일, 닉네임, 비밀번호를 입력해 새 계정을 생성하는 기능. 이메일·닉네임·비밀번호에 대해 실시간 유효성 검사를 수행하고, 약관 및 개인정보 처리방침 동의가 완료되어야만 가입 가능. 가입 시 계정 상태는 비활성로 생성되며, 이후 이메일 인증을 통해 활성화됨.
- 입력:
  - 이메일, 닉네임, 비밀번호, 비밀번호 확인, 약관 동의 체크
- 출력:
  - 유효성 에러 메시지, 가입 성공/실패 결과, “이메일을 확인해 주세요” 안내 화면
- 우선순위: 상
- 관련 화면 ID: SCR-ACC-001
- 비고: 기존 [ACC-001] 본문 분리

---

### ACC-002

- 기능명: 이메일 중복 / 형식검증
- 기능 상세설명:
  - 가입 폼에서 이메일 입력 시 onBlur 시점에 **이메일 형식(@, .)**을 검증하고, 서버 API로 중복 여부를 확인하는 기능. 사용 가능/불가능 여부를 실시간으로 사용자에게 표시.
- 입력:
  - 이메일
- 출력:
  - valid=true/false, “사용 가능한 이메일입니다 / 이미 사용 중인 이메일입니다” 등의 메시지
- 우선순위: 상
- 관련 화면 ID: SCR-ACC-001
- 비고: ACC-001 보조 기능이지만 테스트/구현 단위로 분리

---

### ACC-003

- 기능명: 이메일 인증 / 계정 활성화
- 기능 상세설명:
  - 회원가입 완료 후, 외부 메일 서비스(SendGrid 등)를 통해 **시간 제한(예: 1시간)**이 있는 인증 링크를 발송하고, 사용자가 링크를 클릭하면 계정 상태를 활성으로 변경하는 기능. 인증 만료·이미 활성화된 계정·잘못된 토큰 등 예외 케이스 처리가 포함됨.
- 입력:
  - 이메일, 인증 토큰
- 출력:
  - 인증 성공/실패 상태, “계정이 활성화되었습니다. 로그인해 주세요.” / “인증 링크가 만료되었습니다. 다시 발송해 주세요.” 등 안내 화면
- 우선순위: 상
- 관련 화면 ID: SCR-ACC-001-VERIFY
- 비고: 기존 [ACC-001]의 이메일 인증 부분 분리

---

### ACC-004

- 기능명: 로그인 (이메일 / 비밀번호)
- 기능 상세설명:
  - 사용자가 이메일/비밀번호로 로그인하는 기능. 입력 정보 검증 후 JWT를 발급하여 클라이언트에 저장하며, 로그인 상태 유지 옵션 선택 시 리프레시 토큰 또는 장기 쿠키 기반 세션을 유지. 비활성/미인증 계정, 탈퇴 계정 등에 대해 각각 다른 오류 메시지를 제공.
- 입력:
  - 이메일, 비밀번호, 로그인 상태 유지 여부
- 출력:
  - 액세스 토큰(JWT), 리프레시 토큰 또는 세션 정보, 오류 메시지(“이메일 인증이 완료되지 않았습니다” 등)
- 우선순위: 상
- 관련 화면 ID: SCR-ACC-002
- 비고: 기존 [ACC-002] 일부

---

### ACC-005

- 기능명: 소셜로그인 (구글 / 카카오)
- 기능 상세설명:
  - 구글/카카오 계정으로 로그인/회원가입하는 기능. 최초 소셜 로그인 시 서비스 약관 동의 및 닉네임 설정 과정을 거친 후 내부 계정과 매핑. 이후에는 소셜 토큰 검증만으로 바로 로그인. 이메일이 기존 계정과 겹칠 경우 계정 연결/충돌 처리 정책 필요.
- 입력:
  - 소셜 제공자(provider), 소셜 액세스 토큰/인가 코드
- 출력:
  - 내부 사용자 ID, JWT 토큰, 약관 동의 필요 여부, 닉네임 설정 필요 여부
- 우선순위: 중
- 관련 화면 ID: SCR-ACC-002-SNS
- 비고: 기존 [ACC-002] 중 소셜 로그인 분리

---

### ACC-006

- 기능명: 로그아웃
- 기능 상세설명:
  - 로그인된 사용자가 수동으로 로그아웃하는 기능. 클라이언트에 저장된 토큰/세션 정보를 삭제하고, 서버 측 리프레시 토큰·세션도 무효화. 로그아웃 후에는 로그인 페이지나 랜딩 페이지로 리다이렉트.
- 입력:
  - 현재 사용자 세션/토큰
- 출력:
  - 로그아웃 성공 여부, 로그인 페이지 또는 홈으로 이동
- 우선순위: 상
- 관련 화면 ID: SCR-ACC-002
- 비고: 별도 기능으로 명확히 분리

---

### ACC-007

- 기능명: 비밀번호 재설정(찾기)
- 기능 상세설명:
  - “비밀번호를 잊으셨나요?” 플로우. 사용자가 가입된 이메일을 입력하면 비밀번호 재설정 링크를 보내고, 링크 클릭 시 새 비밀번호 설정 페이지로 이동. 재설정 시 회원가입과 동일한 비밀번호 유효성 규칙을 적용하며, 변경 후 기존 세션/토큰은 모두 무효화.
- 입력:
  - 이메일(요청 단계), 재설정 토큰, 새 비밀번호/비밀번호 확인
- 출력:
  - 재설정 메일 발송 결과, 토큰 유효성 에러, 비밀번호 변경 성공 여부
- 우선순위: 상
- 관련 화면 ID: SCR-ACC-002-RESET
- 비고: 기존 [ACC-002] 중 비밀번호 찾기 분리

---

### ACC-008

- 기능명: 계정 상태 / 잠금 관리
- 기능 상세설명:
  - 여러 번 로그인 실패 시 일정 횟수 초과하면 계정을 일시 잠그고, 이메일을 통해 잠금 해제 또는 추가 인증을 요구하는 기능. 관리자·보안 정책에 따라 잠금, 비활성, 탈퇴 상태에 대한 공통 처리. (초기 버전에서 필수가 아니면 P3로 시작 가능)
- 입력:
  - 로그인 실패 횟수, 계정 상태, 잠금 해제 요청
- 출력:
  - 계정 상태 플래그(활성/비활성/잠금/탈퇴), 로그인 불가 에러 메시지, 잠금 안내 메일
- 우선순위: 하
- 관련 화면 ID: (관리자/설정 화면 후순위)
- 비고: 선택 기능, 나중에 추가해도 됨

---

## 자산관리

### AST-001

- 기능명: 자산/부채 목록 및 순자산 요약
- 기능 상세설명:
  - 자산 관리 페이지에서 사용자의 모든 자산/부채를 그룹별로 보여주고, 상단에 총 자산, 총 부채, 총 순자산(총자산 - 총부채)를 한눈에 보여주는 기능. 자산 그룹(현금, 은행, 신용카드, 대출 등)별 합계도 각 섹션 헤더에 표시. 순자산은 순자산 반영이 켜진 자산만 합산.
- 입력:
  - 로그인 사용자 ID
- 출력:
  - 자산/부채 그룹 리스트(이름, 타입, 합계), 각 자산 항목(이름, 잔액, 종류, 순자산 반영 여부), 상단 요약 카드(총자산/총부채/총순자산)
- 우선순위: 상
- 관련 화면 ID: SCR-AST-LIST
- 비고: 기존 [FND-01]의 목록/요약 부분

---

### AST-002

- 기능명: 자산/부채 그룹 관리
- 기능 상세설명:
  - 자산 목록 상단에 있는 자산 그룹 섹션(현금, 은행, 신용카드, 대출 등)을 관리하는 기능. 사용자는 그룹 추가 버튼으로 커스텀 그룹(예: 투자, 비상금)을 생성할 수 있고, 그룹명 수정/삭제 가능. 단, 기본 그룹(현금, 은행, 신용카드 등)은 삭제 불가. 삭제 시 해당 그룹의 자산을 다른 그룹으로 옮기도록 안내.
- 입력:
  - 그룹명, 그룹 타입(자산/부채), 생성/수정/삭제 액션
- 출력:
  - 업데이트된 그룹 목록, 삭제 시 재배치 대상 그룹 선택 UI, 성공/에러 메시지
- 우선순위: 중
- 관련 화면 ID: SCR-AST-LIST
- 비고: 기존 [FND-01] “자산 그룹 관리” 세분화

---

### AST-003

- 기능명: 자산 등록(추가)
- 기능 상세설명:
  - 자산 추가 버튼 클릭 시 열리는 모달/시트. 자산명, 소속 그룹, 자산 종류, 초기 금액, 순자산 반영 여부를 입력받아 새로운 자산을 생성. 자산 종류는 “현금, 은행, 체크카드, 신용카드, 대출, 투자…” 등 시스템 제공 목록에서 선택. 초기 금액은 가계부 기록을 시작하는 시점의 잔액.
- 입력:
  - 자산명, 그룹 ID, 자산 종류, 초기 금액, 순자산 반영 토글(ON/OFF)
- 출력:
  - 생성된 자산 ID, 자산 리스트에 새 항목 추가, 순자산/그룹 합계/대시보드 즉시 반영
- 우선순위: 상
- 관련 화면 ID: SCR-AST-EDIT
- 비고: 기존 [FND-01] 자산 등록 모달

---

### AST-004

- 기능명: 자산 정보 수정/삭제
- 기능 상세설명:
  - 기존 자산 카드를 클릭하거나 “편집” 아이콘 클릭 시 자산 정보를 수정하는 기능. 자산명, 소속 그룹, 종류, 순자산 반영 여부, 초기 금액(또는 기준 잔액)을 변경 가능. 삭제 시에는 “이 자산을 삭제하면 관련 거래는 어떻게 처리할지” 정책(허용/비활성화만 허용 등)을 정의하고, 확인 모달을 통해 삭제 처리.
- 입력:
  - 자산 ID, 수정된 값(자산명/그룹/종류/토글 등), 삭제 액션
- 출력:
  - 수정된 자산 데이터, 자산 목록/합계/순자산 재계산, 삭제 시 성공/실패 메시지
- 우선순위: 상
- 관련 화면 ID: SCR-AST-EDIT
- 비고: 삭제 정책은 단순히 “자산 숨김(비활성화)”로 시작해도 됨

---

### AST-005

- 기능명: 자산/그룹 순서 드래그앤드롭
- 기능 상세설명:
  - 자산 관리 페이지에서 자산 그룹/개별 자산의 표시 순서를 드래그 앤 드롭으로 변경할 수 있는 기능. 사용자가 선호하는 순서대로 정렬할 수 있으며, 변경된 순서를 서버에 저장하여 재접속 시에도 동일한 순서를 유지.
- 입력:
  - 드래그 시작 위치, 드롭 위치, 대상 항목(그룹/자산) ID
- 출력:
  - 정렬 순서가 반영된 자산/그룹 리스트(정렬 인덱스 포함), UI에서 재정렬된 상태
- 우선순위: 중
- 관련 화면 ID: SCR-AST-LIST
- 비고: 순수 UX지만 사용감에 큰 영향

---

### AST-006

- 기능명: 신용카드 상세 관리
- 기능 상세설명:
  - 자산 종류가 신용카드인 경우에만 추가 필드를 노출. 결제일(매월 N일), 다음 결제 예정 금액을 입력받아 저장. 이 정보는 대시보드의 “다가오는 정기 내역” 위젯과 [RPT-01], [PLN-03] 등에서 “OO카드 결제 예정”으로 사용. 향후 자동 연동 기능과도 연계 가능.
- 입력:
  - 자산 ID(신용카드), 결제일(1~31 또는 “말일”), 다음 결제 예정 금액
- 출력:
  - 카드 상세 정보, 대시보드 위젯에 표시될 “결제 예정” 데이터
- 우선순위: 중
- 관련 화면 ID: SCR-AST-EDIT, SCR-RPT-DASH
- 비고: 기존 [FND-01] 신용카드 상세 관리 부분

---

### AST-007

- 기능명: 순자산 반영 토글 로직
- 기능 상세설명:
  - 각 자산에 대해 “순자산 반영” 토글 스위치를 제공하는 기능. ON일 경우 총자산·총부채·총순자산 계산에 포함, OFF일 경우 대시보드와 보고서의 순자산 계산에서 제외(예: 자녀 용돈 통장, 임시 계정). 토글 변경 시 관련 위젯/보고서를 즉시 재계산하여 반영.
- 입력:
  - 자산 ID, 순자산 반영 토글 상태(ON/OFF)
- 출력:
  - 업데이트된 순자산 계산 결과, 대시보드/자산 보고서(RPT-02)/대시보드 카드의 재계산된 값
- 우선순위: 상
- 관련 화면 ID: SCR-AST-LIST, SCR-RPT-ASSET
- 비고: 기존 명세서의 “순자산 반영 여부” 세부 로직

---

### AST-008

- 기능명: 거래 연동 잔액 자동 업데이트
- 기능 상세설명:
  - [TRN-01] 거래 입력/수정/삭제 시, 해당 자산의 현재 잔액을 자동으로 업데이트하는 기능. 수입/이체-유입이면 금액을 더하고, 지출/이체-유출이면 차감. 자산 관리 페이지와 대시보드 순자산 요약은 이 변경 사항을 실시간으로 반영해야 함.
- 입력:
  - 거래 데이터(유형, 금액, 자산 ID, 이체 여부), 기존 자산 잔액
- 출력:
  - 업데이트된 자산 잔액, 그룹별 합계, 순자산 재계산 결과
- 우선순위: 상
- 관련 화면 ID: (백엔드 로직, UI는 SCR-AST-LIST / SCR-TRN-01에 반영)
- 비고: FND-01 Acceptance Criteria 그대로 반영, TRN-001/002와 연동

---

### AST-009

- 기능명: 자산 비활성화/숨김 (선택)
- 기능 상세설명:
  - 더 이상 사용하지 않는 계좌/카드는 삭제 대신 비활성화/숨김 상태로 전환하는 기능. 비활성 자산은 신규 거래 입력 시 선택 목록에서 제외되지만, 과거 거래 및 보고서에서는 그대로 유지되어 데이터 정합성을 보장. 필요 시 “비활성 자산 보기” 옵션으로 다시 확인 가능.
- 입력:
  - 자산 ID, 비활성화/활성화 액션
- 출력:
  - 자산 상태 플래그(active/inactive), 자산 목록에서의 표시/숨김 여부, 거래 입력 화면 자산 선택 목록에서의 포함/제외
- 우선순위: 하
- 관련 화면 ID: SCR-AST-LIST, SCR-TRN-01
- 비고: 기존 명세서엔 없지만 실제 운영 시 거의 필수라 “더 필요한 것”으로 추가 제안

---

## 금융연동

### BNK-001

- 기능명: 금융사 목록 조회/선택
- 기능 상세설명:
  - 사용자가 **연동 가능한 금융사 리스트(은행, 카드사 등)**를 보고 선택할 수 있는 기능. 각 항목에 로고, 이름, 유형(은행/카드/증권 등)을 표시. 검색/필터(은행만, 카드사만) 지원. 오픈뱅킹/스크래핑 어떤 방식인지 표시할지 여부는 정책에 따라.
- 입력:
  - 사용자 ID, 현재 연동 상태(이미 연결된 금융사 ID 목록), 필터 조건(유형)
- 출력:
  - 금융사 리스트(금융사 ID, 이름, 로고 URL, 유형, 연동 가능 여부, 이미 연결 여부 표시), 선택된 금융사 정보
- 우선순위: 상
- 관련 화면 ID: SCR-BNK-CONNECT-LIST
- 비고: FUT-03 “금융사 목록 제공”

---

### BNK-002

- 기능명: 금융사 인증 플로우 (연결)
- 기능 상세설명:
  - 사용자가 선택한 금융사를 실제 계정과 연결하는 인증 플로우. 오픈뱅킹/스크래핑 방식에 따라 인증수단(공동·금융인증서, OAuth, ID/PW 등)을 안내하고, 외부 인증 창/모달로 이동했다가 돌아오는 구조. 인증 성공 시 토큰/연결 정보 저장, 실패 시 에러/재시도 안내.
- 입력:
  - 선택한 금융사 ID, 인증 타입(오픈뱅킹/OAuth/인증서/IDPW), 리다이렉트 URL, 사용자 ID
- 출력:
  - 인증 성공/실패 결과, 저장된 연결 정보(연동 ID, 금융사 ID, 마스킹된 계좌/카드 목록, 만료일/재인증 필요일), 상태 메시지(“국민은행 계좌 연동이 완료되었습니다”)
- 우선순위: 상
- 관련 화면 ID: SCR-BNK-CONNECT-FLOW
- 비고: 보안상 주요 로직은 서버

---

### BNK-003

- 기능명: 초기 거래 내역 가져오기
- 기능 상세설명:
  - 금융사 계정을 처음 연동할 때, 최근 N개월(예: 3개월) 의 거래 내역을 한 번에 가져오는 기능. 각 거래를 내부 포맷으로 매핑(날짜, 내용, 금액, 입출금 구분 등)하고, 이미 존재하는 거래와 중복 여부를 체크해 저장. 처음엔 미분류 카테고리/특정 태그(예: #자동연동)를 붙여 구분.
- 입력:
  - 연동 ID, 대상 계좌/카드 ID 목록, 초기 조회 기간(예: 3개월), 외부 API 응답(금액, 잔액, 메모 등)
- 출력:
  - 내부 표준 거래 데이터 리스트(날짜, 내용, 금액, 입금/출금, 원 거래 ID, 계좌 ID 등), 저장된 거래 개수/중복으로 제외된 개수, 생성된 미분류 거래 수, 사용자에게 보여줄 요약(“총 120건을 가져왔습니다”)
- 우선순위: 상
- 관련 화면 ID: SCR-BNK-FIRST-IMPORT
- 비고: FUT-03 “최초 연동 시 최근 3개월 가져오기”

---

### BNK-004

- 기능명: 정기 자동 동기화 스케줄러 관리
- 기능 상세설명:
  - 매일 특정 시간(예: 새벽)에 금융사 API를 호출해, 전날 이후 발생한 신규 거래 내역만 자동으로 동기화하는 기능. 이미 저장된 거래와 중복되지 않도록 기준(거래일시+금액+외부 ID 등)으로 중복 체크. 연동이 여러 개일 경우 병렬/순차 처리 전략 정의.
- 입력:
  - 현재 활성화된 연동 리스트(연동 ID, 마지막 동기화 시각), 스케줄러 트리거 시간, 외부 API 조회 요청 파라미터(기간, 페이지 등)
- 출력:
  - 새로 동기화된 거래 리스트, 동기화 건수(성공/중복/에러), 연동별 마지막 동기화 시각 업데이트, “미분류 거래” 또는 “새로 들어온 거래” 카운트(대시보드/알림에 사용 가능)
- 우선순위: 상
- 관련 화면 ID: (백엔드 배치), SCR-BNK-STATUS
- 비고: FUT-03 “매일 자동 sync”

---

### BNK-005

- 기능명: 연동 거래 중복/정합성 검증
- 기능 상세설명:
  - 금융사에서 가져온 거래가 이미 서비스 내에 저장된 거래인지 판단하고, 중복 저장을 막는 기능. 기준: 외부 거래 ID, 거래일시, 금액, 설명 등 복수 키 조합. 일부 금융사는 같은 거래를 여러 번 내려줄 수 있으므로, 중복 처리 정책(무시/업데이트)을 명확히 정의.
- 입력:
  - 외부 거래 리스트(날짜, 금액, 설명, 외부 ID 등), 내부에 이미 저장된 거래 목록/인덱스 정보
- 출력:
  - 신규로 저장할 거래 리스트, 중복으로 제외된 거래 리스트/개수, 필요 시 업데이트된 거래 정보, 중복 처리 결과에 대한 로그
- 우선순위: 중
- 관련 화면 ID: (백엔드 로직)
- 비고: 정확한 잔액/통계에 중요

---

### BNK-006

- 기능명: 연동 상태/오류 표시 및 재연결 UI
- 기능 상세설명:
  - 설정/금융 연동 관리 화면에서 각 금융사의 연동 상태(정상/재인증 필요/오류)를 보여주는 기능. 최근 동기화 일시, 실패 횟수, 오류 유형(인증 만료/일시적 장애 등)을 간단히 표시. 오류 상태일 때 “다시 연결하기” 버튼 제공.
- 입력:
  - 사용자 ID, 연동 ID별 상태 정보(마지막 성공/실패 시간, 오류 코드, 재인증 필요 여부), 동기화 로그 요약
- 출력:
  - 각 연동에 대한 상태 카드(금융사 이름, 상태 아이콘, 최근 동기화 시각, 오류 메시지), “정상/오류/재인증 필요” 상태 필드, 재연동/해제 버튼 상태
- 우선순위: 중
- 관련 화면 ID: SCR-BNK-STATUS
- 비고: 유저가 안심할 수 있게 시각화

---

### BNK-007

- 기능명: 자동 카테고리 추천(룰/모델)
- 기능 상세설명:
  - 금융사에서 가져온 거래의 내용/가맹점명(예: “스타벅스”)을 기반으로 카테고리를 자동 추천하는 기능. 룰 기반(문자열 매칭) + 향후 ML 모델 도입 가능. 예: “스타벅스” → 식비 > 카페. 추천은 거래 생성 시 기본값으로 세팅하고, 사용자가 수정하면 학습에 활용.
- 입력:
  - 외부 거래 데이터(가맹점명, 메모, 금액, 시간대 등), 기존 카테고리 매핑 룰(키워드→카테고리), 과거 학습 데이터(가맹점별 최종 카테고리)
- 출력:
  - 추천된 카테고리 ID, 추천 신뢰도(선택), UI에 표시할 추천 라벨(“이전에 카페로 분류했어요”), 추천 카테고리가 적용된 거래 초안 데이터
- 우선순위: 상
- 관련 화면 ID: SCR-BNK-FIRST-IMPORT, SCR-TRN-IMPORT
- 비고: FUT-03 “자동 분류 규칙 엔진”

---

### BNK-008

- 기능명: 카테고리 수정 시 규칙 학습/업데이트
- 기능 상세설명:
  - 사용자가 자동 추천된 카테고리를 수동으로 변경했을 때, 그 패턴을 다음부터 반영할 수 있도록 규칙/학습 데이터 갱신하는 기능. 예: “스타벅스”를 ‘기타’ → ‘식비>카페’로 바꾸면, 이후 동일 가맹점 거래는 기본 ‘식비>카페’ 추천. 규칙 충돌 시 우선순위/최근 수정 반영 등 정책 정의.
- 입력:
  - 사용자가 수정한 거래 내역(가맹점명, 이전 카테고리, 새 카테고리), 기존 추천 룰/학습 데이터
- 출력:
  - 업데이트된 카테고리 매핑 룰 또는 학습 데이터(가맹점명 → 카테고리), 다음 동기화/입력 시 적용될 새 추천 결과, 학습 로그(변경 기록)
- 우선순위: 중
- 관련 화면 ID: SCR-TRN-DETAIL, SCR-TRN-LIST
- 비고: 자동 분류 품질 지속 개선

---

### BNK-009

- 기능명: 미분류/자동연동 거래 확인 화면
- 기능 상세설명:
  - 금융사 자동 연동으로 들어왔지만 카테고리가 지정되지 않았거나, 자동 추천이 낮은 신뢰도로 된 거래를 모아서 보여주는 “미분류 거래 목록” 화면. 사용자는 여기에서 한 번에 카테고리/자산/태그 등을 수정하고 저장할 수 있음. 필터(기간, 계좌, 금융사)와 일괄 처리 기능(같은 가맹점 일괄 적용 등) 제공.
- 입력:
  - 사용자 ID, 필터 조건(기간, 금융사, 계좌), 미분류 또는 특정 태그(#자동연동) 가 붙은 거래 리스트
- 출력:
  - 미분류/검토 필요 거래 목록(날짜, 내용, 금액, 계좌, 현재 카테고리/추천 카테고리), 사용자가 수정한 결과, 수정 후 저장된 거래 수, 남은 미분류 건수, “모두 처리됨” 상태 표시
- 우선순위: 중
- 관련 화면 ID: SCR-BNK-UNCLASSIFIED
- 비고: RPT-004/005, CAT-10과 연동

---

### BNK-010

- 기능명: 연동 해제/재연동 처리
- 기능 상세설명:
  - 더 이상 사용하지 않거나 문제 있는 금융사 연결을 해제하는 기능. 해제 시 기존에 가져온 거래/자산 데이터를 유지할지, 특정 계정만 숨길지 정책 설정. 재연동 시에는 BNK-002로 다시 인증 플로우를 진행. 해제 전 경고 모달로 “앞으로 자동 동기화는 중단됩니다” 안내.
- 입력:
  - 사용자 ID, 연동 ID, 해제 요청 액션, 정책 옵션(데이터 유지/숨김 등)
- 출력:
  - 연동 상태=해제, 더 이상 동기화되지 않음, 설정 화면에서 제거 또는 “해제됨” 표시, 관련 자산/계좌의 상태(숨김/유지), 재연동 버튼 표시 상태
- 우선순위: 중
- 관련 화면 ID: SCR-BNK-STATUS
- 비고: 사용자 통제권 보장용

---

## 예산

### BUD-001

- 기능명: 예산 기준 선택
- 기능 상세설명:
  - 예산 설정 화면 상단에서 예산 기준을 분류별, 자산별, 분류+자산(고급) 중 하나로 선택하는 기능. 기준을 변경할 때 “기존 예산 데이터가 초기화됩니다. 계속하시겠습니까?” 경고 모달을 출력하고, 확인 시 기존 기준 기반 예산 데이터를 삭제 또는 아카이브. 기준 값은 해당 월 단위로 저장.
- 입력:
  - 기준 타입(분류/자산/복합), 기준 변경 액션
- 출력:
  - 현재 선택된 기준 타입, 경고 모달 노출 여부, 초기화된 예산 데이터 상태
- 우선순위: 중
- 관련 화면 ID: SCR-PLN-BUDGET
- 비고: 기존 [PLN-02]의 기준 설정 분리

---

### BUD-002

- 기능명: 예산 항목 구조/계층 관리
- 기능 상세설명:
  - 예산 항목을 대분류/소분류 구조로 보여주고 편집하는 기능. 카테고리(식비, 교통 등) 또는 자산(카드, 현금 등)에 따라 리스트를 구성. 각 항목 옆에 예산 금액 입력 필드를 제공하며, 대분류·소분류 구조를 [FND-02] 카테고리 정보와 동기화.
- 입력:
  - 예산 기준 타입, 카테고리/자산 트리 구조, 각 항목의 예산 금액 입력
- 출력:
  - 계층 구조 예산 데이터(대분류/소분류별 금액), 유효성 검사 결과
- 우선순위: 중
- 관련 화면 ID: SCR-PLN-BUDGET
- 비고:

---

### BUD-003

- 기능명: 예산 금액 입력 로직
- 기능 상세설명:
  - 소분류에 금액을 입력하면 상위 대분류와 전체 합계가 자동으로 계산되는 기능. 반대로 대분류 금액을 직접 입력한 경우, 고정된 대분류 총액 내에서 소분류 금액을 분배하도록 UX를 유도(경고 메시지 또는 분배 모달 등). 음수/비현실적인 값 등 입력 제한 포함.
- 입력:
  - 소분류별 예산 금액, 또는 대분류 직접 입력 값
- 출력:
  - 자동 계산된 상위 대분류 예산, 총예산, 오류/경고 메시지(“소분류 합계가 식비 예산을 초과했습니다” 등)
- 우선순위: 중
- 관련 화면 ID: SCR-PLN-BUDGET
- 비고: RPT-03와 직접 연결

---

### BUD-004

- 기능명: 예산 편의 기능 (복사/초기화)
- 기능 상세설명:
  - “이전 달 예산 복사하기”, “이번 달 예산 초기화” 버튼을 제공하는 기능. 복사 시 기준(분류/자산/복합)을 포함하여 그대로 가져오고, 초기화 시 해당 월의 예산 금액을 0 또는 기본값으로 리셋. 두 기능 모두 실행 전 확인 모달을 통해 실수 방지.
- 입력:
  - 대상 월, 액션 타입(복사/초기화), 복사 소스 월
- 출력:
  - 복사/초기화 후 예산 데이터, 성공/실패 메시지
- 우선순위: 중
- 관련 화면 ID: SCR-PLN-BUDGET
- 비고:

---

### BUD-005

- 기능명: 연간 비정기 지출 관리
- 기능 상세설명:
  - “연간 예비비” 영역을 별도로 두고, 경조사/여행/세금 등 비정기 지출 예산을 관리하는 기능. 연간 예비비 총액을 설정하고, 실제 지출이 발생하면 해당 풀에서 차감. 월별 예산과는 별도로 관리되며, RPT-03/대시보드에서 별도 카드나 섹션으로 표시.
- 입력:
  - 연간 예비비 금액, 항목 메모, 차감될 거래 정보
- 출력:
  - 남은 연간 예비비, 사용 내역 리스트, 사용 비율(%)
- 우선순위: 하
- 관련 화면 ID: SCR-PLN-BUDGET-ANNUAL
- 비고: 고도화/차후 추가 가능

---

### BUD-006

- 기능명: 예산 이월 정책 설정
- 기능 상세설명:
  - 월별 예산 설정에서, 남은 예산/초과 사용분을 다음 달에 어떻게 처리할지 옵션을 주는 기능. 예: (1) 이월 안 함 (2) 남은 금액을 다음 달 예산에 더하기 (3) 초과분을 다음 달 예산에서 미리 차감. 항목별/전체 단위 정책 중 어떤 레벨까지 지원할지도 정의.
- 입력:
  - 예산 기준(분류별/자산별), 대상 월, 항목별 이월 옵션(전체 공통/항목별), 사용자가 선택한 이월 정책 값
- 출력:
  - 저장된 이월 정책 설정 값, 다음 달 예산 생성/복사 시 사용할 이월 규칙(남은 금액/초과분 처리 방식), 예산 설정 화면에서 보여줄 현재 정책 표시
- 우선순위: 중
- 관련 화면 ID: SCR-PLN-BUDGET, SCR-RPT-BUDGET
- 비고: PLN-02 확장

---

### BUD-007

- 기능명: 이월 금액 자동 계산/적용
- 기능 상세설명:
  - BUD-006에서 정의된 정책에 따라, 전월 예산 대비 실제 지출을 계산하고 남은 금액 또는 초과분을 다음 달 예산에 자동 반영하는 기능. 예: 식비 예산 50만 → 지출 40만 → 남은 10만을 다음 달 식비에 +10만. 롤링 합계(누적 이월 잔액)도 선택적으로 관리.
- 입력:
  - 전월 예산 금액, 전월 실제 지출 금액(항목별), 이월 정책 설정(BUD-006), 생성할 다음 달 예산 템플릿
- 출력:
  - 다음 달 예산 값(이월 반영된 최종 금액), 각 항목별 이월 금액/초과 금액 정보, 예산 보고서에 사용할 “이월분” 항목(예: 이번 달 예산=기본 50만 + 이월 10만)
- 우선순위: 중
- 관련 화면 ID: SCR-PLN-BUDGET, SCR-RPT-BUDGET
- 비고: RPT-005와 연동

---

## 카테고리관리

### CAT-001

- 기능명: 수입/지출 카테고리 탭 전환
- 기능 상세설명:
  - 카테고리 관리 페이지 상단에 수입 / 지출 탭을 두고, 탭에 따라 각각 다른 카테고리 목록을 보여주는 기능. 현재 선택된 탭은 색상/밑줄 등으로 명확하게 강조. 탭 전환 시 관련 API 호출 또는 캐싱된 데이터를 사용해 리스트 갱신.
- 입력:
  - 선택 탭 타입(income / expense)
- 출력:
  - 해당 탭에 해당하는 카테고리 트리(대분류/소분류), 현재 선택 탭 상태
- 우선순위: 상
- 관련 화면 ID: SCR-CAT-MAIN
- 비고: 기존 [FND-02]의 “수입/지출 탭” 부분

---

### CAT-002

- 기능명: 카테고리 계층 목록 표시
- 기능 상세설명:
  - 선택된 탭(수입/지출)에 대해 대분류-소분류가 계층 구조로 표시되는 목록 UI. 대분류는 굵게, 소분류는 들여쓰기 등으로 구분. 각 항목에는 이름, 사용 여부(선택), 순서 핸들(드래그용) 아이콘을 표시. 카테고리는 [TRN-06] 거래 입력 화면과 동일한 구조를 사용해 일관성 유지.
- 입력:
  - 카테고리 트리 데이터(대분류 리스트 + 각 대분류의 소분류 리스트)
- 출력:
  - 렌더링된 계층 구조 목록, 각 항목별 액션 버튼(추가/수정/삭제/드래그 핸들)
- 우선순위: 상
- 관련 화면 ID: SCR-CAT-MAIN
- 비고: TRN-06과 데이터 구조 공유, AST-009(자산 비활성화/숨김)와 유사한 패턴

---

### CAT-003

- 기능명: 대분류 카테고리 추가
- 기능 상세설명:
  - “대분류 추가” 버튼을 눌렀을 때 새 대분류 카테고리를 생성하는 기능. 수입/지출 탭에 따라 해당 타입으로 생성. 이름 입력 후 엔터 or 저장 버튼으로 확정. 이름 중복/공백/길이 제한(예: 1~15자) 등 유효성 검사를 수행하고, 생성 성공 시 목록 상단 또는 하단에 새 항목을 추가.
- 입력:
  - 탭 타입(income/expense), 새 대분류 이름
- 출력:
  - 생성된 대분류 ID, 카테고리 트리 갱신, 에러 메시지(“이미 존재하는 이름입니다” 등)
- 우선순위: 상
- 관련 화면 ID: SCR-CAT-MAIN
- 비고:

---

### CAT-004

- 기능명: 소분류 카테고리 추가
- 기능 상세설명:
  - 각 대분류 오른쪽의 “소분류 추가” 버튼을 눌렀을 때, 해당 대분류 하위에 새로운 소분류 카테고리를 생성하는 기능. 기본 이름(예: “새 소분류”)으로 생성 후 인라인 편집 모드로 바로 전환. 수입/지출 타입은 상위 대분류를 따라감.
- 입력:
  - 상위 대분류 ID, 새 소분류 이름(또는 기본값 후 편집)
- 출력:
  - 생성된 소분류 ID, 대분류 하위 리스트 갱신
- 우선순위: 상
- 관련 화면 ID: SCR-CAT-MAIN
- 비고:

---

### CAT-005

- 기능명: 카테고리 이름 인라인 수정
- 기능 상세설명:
  - 대분류/소분류 항목 오른쪽의 수정 아이콘을 눌렀을 때, 해당 항목의 이름을 리스트 내에서 바로 수정할 수 있는 기능. 기존 텍스트를 인풋으로 변경, 엔터/포커스 아웃 시 저장. 공백/중복/길이 제한 등에 대한 유효성검사를 수행하고, 실패 시 기존 값 복구 + 에러 메시지 표시.
- 입력:
  - 카테고리 ID, 새 이름 텍스트
- 출력:
  - 수정된 카테고리 이름, 수정 성공/실패 메시지
- 우선순위: 상
- 관련 화면 ID: SCR-CAT-MAIN
- 비고:

---

### CAT-006

- 기능명: 카테고리 삭제 및 미분류 정책
- 기능 상세설명:
  - 카테고리 항목의 삭제 아이콘을 눌렀을 때 삭제 전 확인 모달을 띄우고, **“이 카테고리로 기록된 과거 내역은 ‘미분류’로 변경됩니다. 계속하시겠습니까?”**와 같은 정책 안내를 표시. 삭제 확정 시, 해당 카테고리 ID를 사용하는 거래들의 카테고리를 미분류 카테고리 ID 또는 NULL로 변경하는 백엔드 로직 실행.
- 입력:
  - 카테고리 ID, 삭제 확인 액션
- 출력:
  - 삭제 결과, 업데이트된 카테고리 트리, 영향을 받은 거래 건수(선택적 표시), “미분류로 변경되었습니다” 안내
- 우선순위: 상
- 관련 화면 ID: SCR-CAT-MAIN
- 비고: 기존 [FND-02] 삭제 정책 반영

---

### CAT-007

- 기능명: 카테고리 순서 변경 및 이동
- 기능 상세설명:
  - 카테고리 목록에서 항목을 드래그 앤 드롭으로 순서를 변경하거나, 소분류를 다른 대분류로 이동시키는 기능. 이동 가능한 영역(같은 타입 내)만 허용. 순서 변경 결과는 서버에 저장되어 재접속 시에도 동일한 정렬 유지. 소분류를 다른 대분류로 옮길 때, 관련 통계/보고서에 문제 없도록 카테고리 ID는 그대로 유지.
- 입력:
  - 드래그 대상 카테고리 ID, 드롭 대상 위치/부모 카테고리 ID
- 출력:
  - 변경된 계층 구조(상위/하위 관계, 정렬 인덱스), UI에서 즉시 재정렬된 목록
- 우선순위: 중
- 관련 화면 ID: SCR-CAT-MAIN
- 비고: 데이터 모델은 TRN에 저장된 FK 유지

---

### CAT-008

- 기능명: 기본 카테고리 제공/초기화
- 기능 상세설명:
  - 서비스가 제공하는 **기본 카테고리 세트(식비, 교통, 고정비, 월급 등)**를 초기 상태에 자동 생성하는 기능. 설정 화면 또는 카테고리 관리 페이지에서 “기본 카테고리 복원” 버튼을 제공해, 사용자가 지웠거나 수정한 기본 카테고리를 다시 기본값으로 되돌릴 수 있도록 옵션 제공.
- 입력:
  - 초기 가입 여부, 복원 액션
- 출력:
  - 기본 카테고리 목록, 기존 사용자 정의 카테고리와의 병합 정책(기본만 초기화/전체 덮어쓰기 등), 복원 성공/실패 메시지
- 우선순위: 중
- 관련 화면 ID: SCR-CAT-MAIN / SCR-SET-LEDGER
- 비고: 기존 명세서 “기본 카테고리 제공”을 더 명확히 + UX-01 온보딩 초기 설정과 연계 가능

---

### CAT-009

- 기능명: 거래 입력 화면과 실시간 동기화
- 기능 상세설명:
  - [TRN-01] 거래 입력 화면의 카테고리 선택 드롭다운/모달과 카테고리 관리 화면을 실시간으로 동기화하는 기능. 새로운 카테고리 추가/수정/삭제 후, 거래 입력 화면으로 돌아가면 별도 새로고침 없이 최신 카테고리 구조가 반영되어야 함. 클라이언트 캐싱 또는 전역 상태(Zustand 등)를 활용.
- 입력:
  - 카테고리 변경 이벤트(추가/수정/삭제), 현재 선택된 가계부 ID
- 출력:
  - 업데이트된 카테고리 트리(전역 상태), 거래 입력 화면(TRN-01, TRN-06)의 카테고리 선택 목록 새로 렌더링
- 우선순위: 상
- 관련 화면 ID: SCR-CAT-MAIN, SCR-TRN-01
- 비고: 기존 수용조건 “TRN-01에서 바로 보이게”를 기능으로 분리

---

### CAT-010

- 기능명: “미분류” 카테고리 관리
- 기능 상세설명:
  - 시스템에서 사용하는 특별 카테고리인 미분류를 관리하는 기능. 사용자가 삭제할 수 없으며, 이름 변경 여부는 정책으로 정의(잠금/허용). 카테고리 삭제 시 또는 Import 시 카테고리를 매칭하지 못한 거래는 자동으로 미분류로 설정. 보고서/필터에서도 별도의 표시 규칙을 적용할 수 있음.
- 입력:
  - 미분류 카테고리 ID(고정), 거래 카테고리 변경 이벤트
- 출력:
  - 미분류 카테고리로 재매핑된 거래 내역, 미분류 건수(보고서에 표시 가능)
- 우선순위: 중
- 관련 화면 ID: SCR-CAT-MAIN, SCR-TRN-01, SCR-RPT-BUDGET
- 비고: 명세서에 암시돼 있던 정책을 명시화

---

## 데이터관리

### DTM-001

- 기능명: 거래 데이터 CSV 내보내기
- 기능 상세설명:
  - 현재 가계부의 거래 내역을 CSV 파일로 다운로드하는 기능. 기간을 지정할 수 있으며(예: 이번 달, 지난 달, 사용자 지정 기간), 선택한 기간에 포함된 거래만 내보낸다. CSV는 Excel/Google Sheets에서 깨지지 않도록 인코딩/구분자/날짜·금액 포맷을 표준화해서 생성.
- 입력:
  - 선택한 가계부 ID, 내보내기 기간(시작일/종료일 또는 프리셋), 포함할 필드 옵션(선택: 태그, 메모 등)
- 출력:
  - 생성된 CSV 파일 다운로드 링크/스트림, 파일 메타 정보(파일명, 생성일시, 레코드 수), 내보낸 거래 수 요약(예: “총 123건 내보냄”)
- 우선순위: 하
- 관련 화면 ID: SCR-SET-DATA
- 비고: 기존 [SHR-001] Export, BNK-003/004(금융 연동 Import)와는 별개로, 수동 Export 용

---

### DTM-002

- 기능명: 거래 데이터 CSV 가져오기
- 기능 상세설명:
  - 은행/카드사 등에서 내려받은 CSV 파일을 업로드해 거래 내역으로 등록하는 기능. ① 업로드 및 파싱 ② 컬럼 매칭(파일의 ‘거래일시’ → 시스템의 ‘날짜’ 등) ③ 미리보기 및 확인의 3단계로 구성. 가져온 거래는 기본적으로 미분류 상태로 저장하며, 사용자가 나중에 카테고리를 지정하도록 유도.
- 입력:
  - 업로드한 CSV 파일, 사용자가 매핑한 컬럼 정보(파일 컬럼명 ↔ 시스템 필드: 날짜, 내용, 금액, 메모 등), 중복 처리 옵션(중복 허용/중복 제거 기준 등)
- 출력:
  - 파싱된 거래 미리보기 리스트, 매핑 결과(누락된 필드 여부, 문제 행 개수), 실제로 저장된 거래 수, 오류 행 리스트(선택), 저장 완료 메시지(예: “100건 중 95건이 등록되었습니다. 5건은 오류로 제외되었습니다.”)
- 우선순위: 하
- 관련 화면 ID: SCR-SET-DATA-IMPORT
- 비고: 기존 [SHR-001] Import, 미분류 처리 정책은 CAT-010 참조

---

### DTM-003

- 기능명: Import 데이터 검증
- 기능 상세설명:
  - CSV 가져오기 시, 각 행의 날짜 형식, 금액 형식, 필수 컬럼 누락, 잘못된 통화 코드 등을 검증하는 기능. 필드 매핑 단계에서 사용자가 지정한 매핑 정보에 따라, 허용 날짜 범위, 숫자 여부, 필수 필드 존재 여부를 체크하고, 오류/경고 리스트를 생성한다. 이 요구사항은 “검증 로직”에 집중하며, 저장/에러처리 정책은 별도 기능에서 담당한다.
- 입력:
  - 업로드 CSV의 각 행 데이터, 사용자가 지정한 컬럼 매핑 정보, 검증 규칙(허용 날짜 범위, 허용 통화, 필수 필드 목록 등)
- 출력:
  - 에러/경고 목록(행 번호, 필드명, 문제 유형: “날짜 형식 오류”, “금액이 숫자가 아님”), 오류 행 수, 전체 행 수 대비 오류 비율
- 우선순위: 하
- 관련 화면 ID: SCR-SET-DATA-IMPORT
- 비고: 검증 결과만 책임, 실제 저장/제외 정책은 DTM-004에서 처리

---

### DTM-004

- 기능명: Import 오류 처리 및 저장 정책
- 기능 상세설명:
  - DTM-003에서 나온 검증 결과를 바탕으로, 문제 있는 행을 어떻게 처리할지를 결정하는 기능. “전체 취소” 또는 “문제 행만 제외하고 나머지 저장” 정책을 지원하고, 사용자가 오류 행을 수정 후 재시도할 수 있는 UI를 제공한다. 최종적으로 몇 건이 저장되었는지 요약 정보를 보여준다.
- 입력:
  - 검증 결과(에러/경고 목록), 사용자가 선택한 처리 방식(전체 취소/문제 행 제외 후 저장), 사용자가 수정한 데이터(선택)
- 출력:
  - 최종 저장 결과 요약(성공 건수, 실패 건수, 제외된 행 번호 목록), 저장 실패 사유, 재시도 가능 여부, 사용자에게 표시할 결과 메시지
- 우선순위: 하
- 관련 화면 ID: SCR-SET-DATA-IMPORT
- 비고: “정책 + UX” 영역, 향후 고도화 포인트, 미분류 처리: CAT-010, BNK-009와 연계

---

## 목표관리

### GOL-001

- 기능명: 목표 목록 조회
- 기능 상세설명:
  - 사용자가 생성한 모든 재무 목표를 카드 형태의 목록으로 조회하는 기능. 각 카드에는 목표명, 목표 금액, 현재까지 모인 금액, 달성률(%), 남은 금액, 남은 기간(D-day)을 표시. 필터(진행 중/달성/종료)나 정렬(마감일 순/달성률 순 등) 옵션을 제공할 수 있음.
- 입력:
  - 로그인 사용자 ID, 필터(상태/기간), 정렬 옵션
- 출력:
  - 목표 카드 리스트(목표명, 목표금액, 현재금액, 달성률, 남은금액, D-day, 상태)
- 우선순위: 중
- 관련 화면 ID: SCR-PLN-GOAL-LIST
- 비고: 기존 [PLN-01] 목록 부분

---

### GOL-002

- 기능명: 목표 생성
- 기능 상세설명:
  - 새 목표 만들기 버튼을 눌렀을 때 실행되는 기능. 목표명, 목표 금액, 목표 마감일, 관련 아이콘/이미지를 입력받고, 이 목표와 연결할 자산(계좌)을 1개 이상 선택하게 함. 생성 시 기본 상태는 “진행 중”으로 설정. 목표 금액 0 이하, 마감일 과거 날짜 등은 유효성 오류로 처리.
- 입력:
  - 목표명, 목표금액, 마감일, 아이콘/이미지, 연결 자산 ID 목록
- 출력:
  - 생성된 목표 ID, 생성 성공/실패 여부, 유효성 에러 메시지
- 우선순위: 중
- 관련 화면 ID: SCR-PLN-GOAL-NEW
- 비고: [PLN-01] 목표 생성 부분 분리

---

### GOL-003

- 기능명: 목표 수정/삭제/상태 변경
- 기능 상세설명:
  - 목표 상세 화면에서 목표명, 금액, 마감일, 아이콘/이미지를 수정하거나, 목표 상태를 “진행 중/달성/종료/포기”로 변경하는 기능. 삭제 시에는 “목표를 삭제해도 기존 거래 기록은 유지되지만, 목표 리포트에서는 제외됩니다” 같은 정책을 명시하고 확인 모달을 통해 처리.
- 입력:
  - 목표 ID, 수정 값(이름/금액/마감일/아이콘 등), 상태 변경 액션(완료/포기/삭제)
- 출력:
  - 수정된 목표 정보, 상태 변경 결과, 삭제 시 목록/리포트에서의 반영 상태, 사용자 안내 메시지
- 우선순위: 중
- 관련 화면 ID: SCR-PLN-GOAL-DETAIL
- 비고:

---

### GOL-004

- 기능명: 목표 상세 보기
- 기능 상세설명:
  - 목표 카드 클릭 시 상세 화면/모달을 열어 이 목표에 대한 집중 화면을 제공하는 기능. 현재 달성 현황(달성률, 모인 금액, 남은 금액/기간)을 크게 보여주고, 연결된 자산 목록과 최근 기여 내역(이 목표에 반영된 입금/이체 거래)을 표/타임라인 형태로 나열.
- 입력:
  - 목표 ID
- 출력:
  - 목표 기본 정보(이름, 금액, 마감일), 진행도 정보(현재금액, 달성률, 남은금액, D-day), 연결 자산 목록, 기여 거래 내역 리스트
- 우선순위: 중
- 관련 화면 ID: SCR-PLN-GOAL-DETAIL
- 비고:

---

### GOL-005

- 기능명: 목표 진행도 시각화
- 기능 상세설명:
  - 목표 상세 화면 상단에 “물 채우기”, “나무 키우기” 등 시각적인 달성도 게이지 UI를 렌더링하는 기능. 목표 달성률(0~100%)에 따라 색상/애니메이션을 다르게 적용. 100% 이상일 경우 “목표 달성!” 배지와 축하 애니메이션(컨페티 등)을 표시.
- 입력:
  - 목표 달성률(%) , 상태(진행 중/달성/초과)
- 출력:
  - 달성도 게이지 상태(색상, 채워진 비율, 애니메이션 여부), “목표 달성!” 배지 노출 여부
- 우선순위: 중
- 관련 화면 ID: SCR-PLN-GOAL-DETAIL
- 비고: RPT/대시보드와 톤 맞추기

---

### GOL-006

- 기능명: 목표와 자산 연동/기여 계산
- 기능 상세설명:
  - 목표에 연결된 자산들의 입·출금 내역 중 “이 목표에 기여된 금액”을 계산하는 기능. 사용자가 특정 거래를 목표 기여로 표시하거나, 특정 자산 전체 입금액을 기본적으로 목표에 포함시키는 방식 등 정책 정의. 기여 내역을 바탕으로 목표 현재금액/달성률을 실시간 업데이트.
- 입력:
  - 목표 ID, 연결 자산 ID 목록, 기여 규칙(자산 전체/특정 태그/직접 지정 등), 새로운 거래 발생 이벤트
- 출력:
  - 각 목표의 현재 기여금, 달성률, 기여 내역 리스트
- 우선순위: 중
- 관련 화면 ID: (백엔드 로직, UI는 DETAIL에 반영)
- 비고: RPT/대시보드 위젯에 사용, 거래 발생/수정/삭제 이벤트(TRN-001/008)와 연동되는 계산 로직

---

## 다국어/i18n

### I18-001

- 기능명: 언어 선택 UI
- 기능 상세설명:
  - 설정 화면에서 사용자가 기본 언어(한국어, 영어, 일본어 등)를 선택할 수 있는 기능. 드롭다운/라디오 버튼 형태로 제공하고, 현재 선택된 언어에 체크/하이라이트 표시. 언어 변경 시 “앱 텍스트가 변경됩니다” 정도의 안내 후, 전역 상태를 변경하여 UI 텍스트를 즉시 해당 언어로 다시 렌더링.
- 입력:
  - 사용자 ID, 선택한 언어 코드(ko, en, ja 등), 이전에 저장된 언어 설정 값
- 출력:
  - 현재 세션에 적용된 언어 코드, 설정 페이지에 표시할 현재 언어 상태, 나머지 화면에서 사용할 로컬 문자열 리소스 키/언어 정보
- 우선순위: 상
- 관련 화면 ID: SCR-I18N-SETTINGS
- 비고: FUT-04 “언어 선택 기능”

---

### I18-002

- 기능명: 언어 설정 저장/로드
- 기능 상세설명:
  - 사용자가 선택한 언어를 사용자 설정(서버 또는 로컬 스토리지)에 저장하고, 다음 로그인 시 자동으로 불러와서 적용하는 기능. 로그인 전에는 브라우저/OS 언어를 기본값으로 사용, 로그인 후에는 사용자 설정 언어가 우선.
- 입력:
  - 사용자 ID, 선택한 언어 코드, 브라우저/OS 언어 정보(예: navigator.language)
- 출력:
  - 서버/로컬에 저장된 최종 언어 코드, 앱 초기 로딩 시 적용할 언어 결정 결과, 초기 렌더링에 사용할 언어 코드
- 우선순위: 상
- 관련 화면 ID: SCR-I18N-SETTINGS, APP-BOOT
- 비고: 언어 깜빡임(Flicker) 줄이기 중요

---

### I18-003

- 기능명: 프론트 i18n 리소스 로딩
- 기능 상세설명:
  - react-i18next 등 i18n 프레임워크를 사용하여 언어별 텍스트 리소스 파일(예: ko.json, en.json, ja.json)을 로딩하는 기능. 초기 로딩 시 기본 언어 리소스를 불러오고, 언어 변경 시 해당 언어 JSON을 비동기로 불러온 뒤 화면 전체를 재렌더링. 코드 내 하드코딩된 문자열은 모두 key 사용으로 통일.
- 입력:
  - 선택된 언어 코드, 언어별 리소스 파일 경로/이름(locales/ko.json, locales/en.json 등), 번역 키(dashboard.title, button.save 등)
- 출력:
  - 메모리에 로드된 언어별 key-value 맵, 컴포넌트에서 사용할 번역 함수(t 함수를 통해 key → 텍스트 매핑), 리소스 로딩 상태(로딩중/완료/실패)
- 우선순위: 상
- 관련 화면 ID: APP-ROOT, 모든 화면
- 비고: FUT-04 “i18n 프레임워크 적용(프론트)”

---

### I18-004

- 기능명: 텍스트 리소스 구조/네이밍 규칙
- 기능 상세설명:
  - UI 텍스트를 언어별 JSON 파일로 분리하여 관리하는 규칙 정의 기능. 예: 도메인 기준 네임스페이스(auth.login.title, ledger.asset.addButton)로 나누고, 동일 키를 여러 언어 파일에서 공유. 중복 키 방지, 미번역 키 탐지 등 빌드/테스트 단계에서 검증할 수 있도록 구조 설계.
- 입력:
  - 번역 키 이름 규칙, 도메인 목록(auth, ledger, report, settings 등), 언어 코드별 텍스트 값
- 출력:
  - 언어별 리소스 파일 구조 예시, 유지보수 가이드(어디에 어떤 텍스트를 넣을지), 미번역/누락된 키 목록(빌드 타임 검증 결과)
- 우선순위: 중
- 관련 화면 ID: (개발/빌드 레벨)
- 비고: 실질적으론 문서/규칙이지만 요구사항으로 명시

---

### I18-005

- 기능명: 서버 검증/에러 메시지 다국어 처리
- 기능 상세설명:
  - 백엔드에서 발생하는 검증 오류 메시지, 인증/권한 에러, 공통 에러 텍스트를 요청한 언어로 반환하는 기능. 클라이언트가 헤더나 토큰에 언어 코드를 전송하면, 서버는 해당 언어 리소스에서 메시지를 찾아 응답. 미존재 시 기본 언어(한국어)로 폴백.
- 입력:
  - HTTP 요청 헤더/토큰 내 언어 코드, 에러 코드(예: ERR_INVALID_EMAIL, ERR_PERMISSION_DENIED), 서버측 에러 메시지 리소스 파일
- 출력:
  - 클라이언트에 전달될 최종 에러 메시지 텍스트(언어별), 에러 코드 + 메시지 구조(JSON), 미번역 시 기본 언어 메시지
- 우선순위: 중
- 관련 화면 ID: API 전역, UX-007/008
- 비고: FUT-04 “백엔드 i18n 라이브러리 적용”에 해당, ACC-00x 로그인/회원가입, DTM-003/004 Import 에러 등과 공통 사용

---

### I18-006

- 기능명: 날짜 형식 로컬라이제이션
- 기능 상세설명:
  - 언어/지역 설정에 따라 날짜 표기 형식을 자동으로 변경하는 기능. 예: 한국어= YYYY-MM-DD, 영어(US)= MM/DD/YYYY, 일본어= YYYY/MM/DD. moment/dayjs/Intl.DateTimeFormat 등을 이용하여 공통 포맷터를 만들고, 모든 화면에서 이 함수를 사용해 날짜를 표기.
- 입력:
  - 현재 언어/지역 코드(ko-KR, en-US, ja-JP 등), 원본 날짜 객체/문자열
- 출력:
  - 사용자의 지역에 맞게 포맷팅된 날짜 문자열(예: 2025-05-01, 05/01/2025, 2025/05/01), 보고서/리포트/리스트 등에서 사용되는 일관된 날짜 표기
- 우선순위: 상
- 관련 화면 ID: 모든 날짜 표시 화면 (RPT, TRN 등)
- 비고: FUT-04 “날짜 형식 자동 변경”

---

### I18-007

- 기능명: 숫자/통화 표기 로컬라이제이션
- 기능 상세설명:
  - 언어/통화 설정에 따라 숫자와 통화 표시 형식을 자동으로 변경하는 기능. 예: KRW일 때 1,234,567원, USD일 때 $1,234.50. 소수점, 천 단위 구분자, 통화 기호 위치 등을 Intl.NumberFormat 등으로 처리. 입력은 내부적으로 숫자로 저장하고, 표시할 때만 포맷팅.
- 입력:
  - 현재 화폐 단위(KRW/USD/JPY 등), 언어/지역 코드, 원본 숫자 값(예: 1234.5)
- 출력:
  - 사용자에게 보여줄 포맷된 금액 문자열(예: ₩1,234, $1,234.50, ¥1,235 등), 통화/단위가 포함된 라벨(예: “총 지출: $1,234.50”), 보고서/대시보드/목표 화면 등에서 일관된 금액 표시
- 우선순위: 상
- 관련 화면 ID: SCR-RPT-\*, SCR-DASH, SCR-TRN
- 비고: FUT-04 수용조건 “1234.5 → $1,234.50” 구현

---

### I18-008

- 기능명: 단위/형식 혼합 표시 규칙 정의
- 기능 상세설명:
  - 언어/통화/단위가 섞이는 화면(예: 원화 기준 + 외화 괄호 표기, $10.00(₩12,000) 같은 케이스)에 대한 표기 규칙을 정의하고, 이를 포맷터 함수로 제공하는 기능. 외화 거래를 기록할 때 기준 통화(KRW)와 원래 통화 금액을 함께 표시하는 PNC-01과도 연동.
- 입력:
  - 기준 통화 코드, 거래 통화 코드, 두 통화의 금액(원화 환산금액, 원래 금액), 현재 언어/지역 코드
- 출력:
  - 화면에 표시할 복합 금액 문자열(예: ₩12,000 ($10.00) 또는 $10.00 (₩12,000)), 통화/언어에 따른 괄호 위치/순서 규칙
- 우선순위: 중
- 관련 화면 ID: SCR-TRN-LIST, SCR-RPT-FOREX
- 비고: PNC-01(다중 통화)와 연결

---

### I18-009

- 기능명: URL/라우팅 다국어 처리(선택)
- 기능 상세설명:
  - 웹 버전에서 언어별 URL 패턴(/ko/..., /en/...)을 사용할지 여부를 정의하고, 사용할 경우 라우팅에 반영하는 기능. SEO를 고려해 언어별 canonical URL 설정 등도 가능. 필수는 아니고, 추후 글로벌 확장 시 고려.
- 입력:
  - 선택한 전략(언어별 path 사용 여부), 현재 언어 코드, 현재 라우트 정보
- 출력:
  - 언어별로 분기된 URL(예: /ko/dashboard, /en/dashboard), 언어 전환 시 이동할 경로, 필요 시 <link rel="alternate" hreflang=...> 등 메타 정보
- 우선순위: 하
- 관련 화면 ID: WEB-ROUTER
- 비고: 완전 글로벌 갈 때 고려

---

### I18-010

- 기능명: 언어 전환 UX(헤더 스위처 등)
- 기능 상세설명:
  - 설정 화면 외에도, 헤더나 퀵 메뉴에 언어 전환 드롭다운/아이콘을 제공하는 기능. 클릭 시 즉시 언어가 바뀌고, 현재 페이지 그대로 유지. 모바일/웹에서 공통 UX 적용. “국기 아이콘 + 축약 언어 코드(EN, KO)” 형태 등으로 노출.
- 입력:
  - 현재 언어 코드, 지원 언어 목록, 사용자의 클릭 이벤트(언어 변경)
- 출력:
  - 헤더/푸터에 표시할 언어 스위처 UI, 언어 변경 후 I18-001/002/003 로직을 통해 재렌더링된 화면, 사용자가 다시 돌아와도 유지되는 언어 설정
- 우선순위: 하
- 관련 화면 ID: APP-HEADER
- 비고: 필수 아님, 쓰면 편한 기능

---

## 모니터링

### OPS-001

- 기능명: 에러/성능 로그 수집/저장
- 기능 상세설명:
  - 애플리케이션에서 발생하는 예외/에러(프론트/백엔드)와 주요 성능 지표(API 응답 시간, 주요 페이지 로딩 시간 등)를 중앙 로그/모니터링 시스템에 수집·저장하는 기능. 심각도 레벨(Info/Warning/Error) 구분 및 요청 ID/사용자 ID 등을 함께 기록.
- 입력:
  - 에러 이벤트 정보(에러 코드, 메시지, 스택트레이스), 요청 메타데이터(경로, 응답 시간, 사용자 ID, 브라우저/디바이스 정보), 성능 측정 데이터
- 출력:
  - 저장된 로그 레코드(시간, 종류, 심각도, 상세 정보), 대시보드/분석 도구에서 사용할 수 있는 메트릭(에러 비율, 평균 응답 시간 등), 알림 연동을 위한 심각도 기준 데이터
- 우선순위: 중
- 관련 화면 ID: (운영 도구/백엔드)
- 비고: PNC-03 성능, PNC-04 보안과도 연결

---

### OPS-002

- 기능명: 운영자용 상태 대시보드/알림
- 기능 상세설명:
  - 운영자가 서비스 상태를 한눈에 볼 수 있는 운영 대시보드 기능. 에러율, 응답 시간, 주요 배치 작업(BNK 동기화 등) 성공/실패, 외부 API 상태 등을 시각화. 임계치 초과 시 슬랙/이메일 등으로 알림 발송.
- 입력:
  - 수집된 로그/메트릭(OPS-001), 임계치 설정값(에러율 %, 응답시간 ms 등), 알림 채널 설정(슬랙 webhook, 이메일 등)
- 출력:
  - 운영자 화면에 표시할 상태 카드/차트(에러율, 응답시간, 배치 성공률 등), 임계치 이상 시 발송된 알림 이력, 현재 장애/주의 상태 표시
- 우선순위: 하
- 관련 화면 ID: SCR-OPS-DASHBOARD
- 비고: 완전 내부용 기능이지만 요구사항으로 남겨두면 좋음

---

## 포인트/상점

### PNT-001

- 기능명: 포인트 규칙 정의/관리
- 기능 상세설명:
  - 서버에 포인트 적립 규칙(이벤트 타입, 지급 포인트, 일/주/월 한도)을 정의·관리하는 기능. 예) event: 7_DAYS_STREAK, point: 50, limit: once_a_week. 규칙은 DB/설정 파일로 관리하고, 관리 도구(어드민)는 추후 확장. 클라이언트는 규칙 세부 내용이 아니라 “몇 포인트 받음”만 알면 됨.
- 입력:
  - 규칙 정의 데이터: 이벤트 코드(DAILY_LOGIN, 7_DAYS_STREAK, BUDGET_ACHIEVE 등), 기준 기간(일/주/월), 지급 포인트 수, 제한 조건(1일 1회, 주 1회 등)
- 출력:
  - 활성화된 포인트 규칙 목록(이벤트 코드, 포인트 값, 제한 정보), 특정 이벤트 발생 시 적용할 규칙 객체, 규칙 변경 후 새 규칙이 반영된 캐시/설정 값
- 우선순위: 중
- 관련 화면 ID: (어드민 화면 후순위)
- 비고: 기존 FUT-01 “포인트 적립 규칙 엔진”

---

### PNT-002

- 기능명: 포인트 적립 처리(이벤트 기반)
- 기능 상세설명:
  - 특정 이벤트 발생 시(예: 7일 연속 거래 기록, 월별 예산 100% 달성, 챌린지 성공 등), 포인트 규칙(PNT-001)을 적용해 포인트를 적립하는 기능. 이미 해당 기간에 한도만큼 적립했는지 체크하고, 적립 성공 시 포인트 잔액 변경 + 내역 기록 + 알림(토스트/뱃지)까지 처리.
- 입력:
  - 이벤트 타입(예: 7_DAYS_STREAK), 이벤트 발생 시간, 대상 사용자 ID, 이벤트 관련 메타데이터(기간, 대상 가계부, 챌린지 ID 등)
- 출력:
  - 적립된 포인트 수(예: +50), 적립 후 포인트 잔액, 생성된 포인트 내역 레코드(발생일, 이벤트 타입, 설명), 사용자에게 보여줄 피드백 정보(“챌린지 성공: +50P”)
- 우선순위: 상
- 관련 화면 ID: SCR-PNT-POINT-INFO
- 비고: FUT-01 수용조건 “챌린지 성공 시 +N 포인트” 구현, 이벤트 소스: GOL(목표), BUD(예산), CHL(챌린지, 나중에 생기면)

---

### PNT-003

- 기능명: 포인트 차감 처리(사용/구매 시)
- 기능 상세설명:
  - 사용자가 상점에서 아이템을 구매할 때, 보유 포인트를 차감하는 기능. 현재 포인트 잔액이 상품 가격 이상인지 확인하고, 부족하면 구매 불가 에러. 차감 성공 시 포인트 잔액 업데이트 + 사용 내역 기록. 트랜잭션 처리로 중복 차감/잔액 마이너스 방지.
- 입력:
  - 사용자 ID, 구매할 상품 ID, 상품 가격(포인트), 현재 포인트 잔액, 요청 ID(중복 요청 방지용)
- 출력:
  - 차감된 포인트 수(예: -100), 차감 후 포인트 잔액, 포인트 사용 내역 레코드(상품명, 일시, 포인트 수), 실패 시 에러 코드/메시지(“포인트가 부족합니다”)
- 우선순위: 상
- 관련 화면 ID: SCR-PNT-SHOP
- 비고: 구매 로직의 핵심

---

### PNT-004

- 기능명: 상점 상품 목록 조회
- 기능 상세설명:
  - 포인트 상점 화면에서 구매 가능한 디지털 상품 목록을 조회하는 기능. 각 상품 카드는 이미지, 이름, 설명, 가격(포인트), 보유 여부/구매 여부를 표시. 카테고리(테마, 아이콘팩, 프로필 꾸미기 등) 필터나 정렬(가격 순, 인기 순 등) 옵션을 둘 수 있음.
- 입력:
  - 사용자 ID, 필터 조건(카테고리, 가격 범위 등), 정렬 옵션(최신순/가격순/인기순), 페이지 번호/페이지 크기
- 출력:
  - 상점 상품 리스트(상품 ID, 이름, 설명, 이미지 URL, 가격, 카테고리, 구매 가능 여부, 이미 보유한지 여부), 페이지네이션 정보, 추천 상품 섹션(선택)
- 우선순위: 중
- 관련 화면 ID: SCR-PNT-SHOP
- 비고: FUT-01 상점(Store) 목록,UI 스타일: 네오브루탈리즘 공통 컴포넌트(Button/Card) 재사용

---

### PNT-005

- 기능명: 상점 상품 상세 조회
- 기능 상세설명:
  - 상품 카드를 클릭했을 때 상품 상세 정보를 모달/별도 화면으로 보여주는 기능. 포함 내용: 상품 대표 이미지, 상세 설명, 필요 포인트, 사용 위치(예: “대시보드 테마로 적용 가능”), 사용 기한 여부, 환불/교환 정책 등. 구매 버튼과 포인트 부족 시 안내 메시지를 함께 제공.
- 입력:
  - 사용자 ID, 상품 ID
- 출력:
  - 선택한 상품의 상세 정보(이름, 큰 이미지 URL, 상세 설명, 가격, 카테고리, 사용처 정보, 이미 보유 중인지 여부), 구매 가능 여부, 부족 포인트 수(“50P 부족”) 정보
- 우선순위: 하
- 관련 화면 ID: SCR-PNT-SHOP-DETAIL
- 비고: 선택 기능이지만 UX에 도움

---

### PNT-006

- 기능명: 상점 상품 구매 처리
- 기능 상세설명:
  - 사용자가 상점에서 “구매” 버튼을 눌렀을 때, PNT-003 포인트 차감과 함께 상품 소유권 부여/적용 가능 상태로 만드는 기능. 동일 상품 중복 구매 정책(허용/불허)을 정의하고, 구매 성공 시 즉시 사용할 수 있도록 관련 설정(테마/아이콘/프로필 아이템)을 해금 상태로 변경.
- 입력:
  - 사용자 ID, 상품 ID, 상품 가격(포인트), 현재 포인트 잔액, 클라이언트 구매 요청 정보(디바이스/세션 등)
- 출력:
  - 구매 성공/실패 결과, 차감된 포인트/잔액(PNT-003 결과), 사용자 보유 아이템 목록 갱신, “적용하러 가기” 링크(예: 테마 설정 화면 이동), 실패 시 메시지(“이미 보유한 상품입니다” 등)
- 우선순위: 상
- 관련 화면 ID: SCR-PNT-SHOP
- 비고: 포인트 차감과 하나의 트랜잭션으로 묶기

---

### PNT-007

- 기능명: 포인트 요약 정보 표시
- 기능 상세설명:
  - 마이페이지 또는 상단 프로필 드롭다운에서 현재 보유 포인트와 간단한 등급/레벨을 보여주는 기능. 예: “1,230P · 레벨 3 (Green)”. 포인트 등급은 누적 적립량 또는 일정 기간 사용량으로 계산. 클릭 시 포인트 상세 내역 화면으로 이동.
- 입력:
  - 사용자 ID, 포인트 잔액, 등급/레벨 계산에 필요한 누적 포인트/조건
- 출력:
  - 현재 보유 포인트 값, 표시용 포맷(예: 1,230P), 등급/레벨 이름 및 뱃지 정보(아이콘/색상), 포인트 상세 내역 화면으로 이동할 링크/라우팅 정보
- 우선순위: 중
- 관련 화면 ID: SCR-PNT-POINT-INFO
- 비고: FUT-01 “포인트 관리 페이지”와 연결

---

### PNT-008

- 기능명: 포인트 적립/사용 내역 리스트
- 기능 상세설명:
  - 포인트 관리 페이지에서 포인트 적립/사용 내역을 타임라인 형태로 보여주는 기능. 각 행에는 날짜/시간, 구분(적립/사용), 이벤트/상품명, 포인트 변화(+/-), 잔액을 표시. 필터(적립만/사용만/기간 필터) 및 페이징 또는 무한 스크롤 지원.
- 입력:
  - 사용자 ID, 필터 조건(적립/사용, 기간, 이벤트 타입 등), 페이지 번호/사이즈
- 출력:
  - 포인트 거래 내역 리스트(일시, 타입, 설명, 변화량, 잔액), 총 건수/페이지 정보, 필터 적용 상태, 데이터 없음 시 안내 메시지(“포인트 내역이 없습니다. 챌린지에 참여해보세요!” 등)
- 우선순위: 중
- 관련 화면 ID: SCR-PNT-POINT-INFO
- 비고: FUT-01의 “포인트 관리 페이지” 핵심, PNT-002, PNT-003과 동일한 포인트 트랜잭션 데이터를 사용

---

### PNT-009

- 기능명: 포인트 알림/피드백(토스트/뱃지)
- 기능 상세설명:
  - 포인트가 적립되거나 사용되었을 때 사용자에게 즉각적인 피드백(토스트, 상단 포인트 아이콘에 뱃지, 간단한 애니메이션 등)을 제공하는 기능. UX-007(전역 토스트)와 연동하여 “+50P 적립되었습니다”, “테마를 구매했어요!” 같은 메시지를 보여주고, 포인트 아이콘/숫자도 실시간 업데이트.
- 입력:
  - 포인트 변경 이벤트(적립/사용, 변화량, 원인 이벤트/상품 정보), 현재 포인트 잔액, UX 설정(알림 on/off 등)
- 출력:
  - 사용자에게 표시할 토스트 메시지(텍스트, 아이콘), 상단 포인트 표시 UI의 새로운 값, 뱃지 애니메이션 상태, 필요 시 “상점 보기” 또는 “챌린지 보기”와 같은 CTA 버튼
- 우선순위: 중
- 관련 화면 ID: SCR-UX-NOTIFY-BASE / SCR-PNT-POINT-INFO
- 비고: UX-007/009와 연결

---

### PNT-010

- 기능명: 아이템 적용/해제 관리
- 기능 상세설명:
  - 사용자가 상점에서 구매한 디지털 아이템(테마, 아이콘팩, 프로필 꾸미기 아이템 등)을 실제로 “적용/해제”하는 기능. 이미 구매 완료된 아이템은 추가 포인트 차감 없이 언제든지 변경 가능해야 하며, 현재 적용 중인 아이템 상태를 저장/조회할 수 있어야 한다. 테마의 경우 동시에 1개만 적용 가능, 프로필 꾸미기 아이템은 슬롯별로 복수 적용 등 리소스 타입별 정책을 정의한다. 아이템 적용/해제 후에는 즉시 UI(테마 색상, 아이콘, 프로필 영역 등)에 반영되어야 한다.
- 입력:
  - 사용자 ID, 아이템 ID, 아이템 타입(테마/아이콘팩/프로필 아이템 등), 적용 액션 타입(적용/해제/변경), 현재 적용 중인 아이템 상태(선택)
- 출력:
  - 적용/해제 결과(성공/실패), 업데이트된 “현재 적용 중인 아이템” 목록(타입별 활성 아이템 ID), 즉시 반영된 UI 상태(테마/아이콘/프로필 등), 실패 사유(예: “미보유 아이템입니다”)
- 우선순위: 중
- 관련 화면 ID: SCR-SET-THEME, SCR-PNT-SHOP
- 비고: 구매 처리(PNT-006)와 분리된 “사용/적용” 단계. 테마 설정/프로필 편집과 공통으로 사용하는 도메인 로직

---

## 반복거래

### REC-001

- 기능명: 반복 거래 규칙 생성/관리
- 기능 상세설명:
  - 반복 거래 관리 화면에서 새 반복 규칙을 추가/수정/삭제하는 기능. 거래 유형(수입/지출), 금액, 카테고리, 자산 정보, 메모를 입력하고, 반복 주기(매일/매주/매월/매년), 시작일, 종료일(선택)을 설정한다. 각 규칙에는 활성/비활성 토글을 제공하여 일시적으로 중단할 수 있으며, 비활성 상태인 규칙은 스케줄 실행(REC-002)에서 제외된다. 규칙 리스트에서 각 규칙의 요약(“매월 25일 월세 70만원”)을 한 줄로 보여준다.
- 입력:
  - 거래 유형, 금액, 카테고리, 자산 ID, 반복 주기, 시작일, 종료일, 메모, 활성/비활성 플래그
- 출력:
  - 반복 규칙 목록(요약 문구 포함, 활성/비활성 상태 표시), 생성/수정/삭제 결과
- 우선순위: 중
- 관련 화면 ID: SCR-PLN-RECUR-LIST
- 비고: 기존 [PLN-03] 일부, 활성/비활성 토글 포함

---

### REC-002

- 기능명: 반복 거래 스케줄 실행
- 기능 상세설명:
  - 서버에서 매일 자정(또는 설정된 시간)에 스케줄러를 실행하여, 당일 생성되어야 할 반복 거래를 실제 거래내역으로 생성하는 기능. 서비스에서 사용하는 기준 타임존(예: Asia/Seoul)을 명확히 정의하고, 자정 기준은 해당 타임존을 따른다. 활성 상태인 반복 규칙만 대상으로 하며, 생성 시 같은 규칙+날짜 조합에 대해 중복 생성 방지를 위한 체크를 수행한다. 생성 실패 시 에러 로그를 남기고, 필요 시 재시도 큐 등으로 재실행할 수 있도록 한다.
- 입력:
  - 현재 날짜/시간(타임존 포함), 활성화된 반복 규칙 목록(REC-001), 중복 여부 조회 결과
- 출력:
  - 생성된 거래 목록, 생성 성공/실패 카운트, 에러/경고 로그, 마지막 실행 시각/결과 요약
- 우선순위: 중
- 관련 화면 ID: (백엔드 배치, UI는 로그/알림)
- 비고: RPT-05, 대시보드 “다가오는 정기 내역”과 연결

---

### REC-003

- 기능명: 반복 거래 사전 알림
- 기능 상세설명:
  - 사용자가 설정한 옵션에 따라 반복 거래 예정일 N일 전에 푸시/이메일 알림을 보내는 기능. 예: “3일 후 월세 70만원이 출금됩니다.” N일 전 계산은 반복 거래의 예정일 기준으로 하며, 이미 지난 예정일에 대해서는 알림을 보내지 않는다. 알림 클릭 시 해당 가계부/관련 화면(거래 내역, 반복 규칙 상세 등)으로 이동한다. 알림 on/off, 알림 시점(N일 전) 설정은 사용자 단위 또는 규칙 단위로 저장할 수 있다.
- 입력:
  - 반복 규칙(예정일, 금액, 메모, 알림 설정 포함), 현재 날짜, 대상 사용자 연락 수단(푸시 토큰, 이메일 등)
- 출력:
  - 발송된 알림 목록(대상 사용자, 제목/본문, 발송 시각), 발송 성공/실패 여부, 알림 텍스트(예: “3일 후 월세 70만원이 출금됩니다”), 알림에서 이동할 딥링크/URL
- 우선순위: 중
- 관련 화면 ID: SCR-PLN-RECUR-SETTINGS / 알림 센터
- 비고: UX-02(주간/월간 리포트 알림)과 패턴 공유 가능

---

### REC-004

- 기능명: 반복 규칙 일시중단/재개
- 기능 상세설명:
  - 기존에 생성된 반복 거래 규칙을 삭제하지 않고, 일시적으로 중단하거나 다시 활성화하는 기능. 규칙 리스트에서 토글 또는 액션 버튼으로 “일시중단/재개”를 선택할 수 있으며, 중단 상태인 규칙은 REC-002 스케줄 실행 시 거래를 생성하지 않는다. 재개 시에는 이후 예정일부터 다시 생성되며, 중단 기간에 해당하는 과거 날짜의 거래는 자동으로 소급 생성하지 않는다(정책).
- 입력:
  - 대상 반복 규칙 ID, 변경할 상태(활성/비활성), 상태 변경 요청자(사용자 ID)
- 출력:
  - 상태 변경 결과(성공/실패), 업데이트된 반복 규칙 목록(각 규칙의 활성/비활성 상태), UI 상에서 중단/재개 상태 표시
- 우선순위: 중
- 관련 화면 ID: SCR-PLN-RECUR-LIST
- 비고: REC-001의 활성/비활성 토글을 별도 액션 관점에서 명시

---

### REC-005

- 기능명: 생성된 반복 거래 예외 관리
- 기능 상세설명:
  - 스케줄러(REC-002)에 의해 생성된 반복 거래 내역 중, 특정 회차만 수정/삭제/건너뛰기 하는 기능. 예: “이번 달 월세는 금액이 다르니 수정”, “이번 달은 건너뛰기” 등. 개별 회차에 대해 수정/삭제를 수행해도 기본 반복 규칙은 유지되며, 해당 회차에 대한 예외 정보를 저장해 향후 같은 날짜에 다시 생성되지 않도록 해야 한다. 사용자는 상세 화면에서 “이 거래만 수정/삭제” 또는 “이후 모든 회차에 적용(규칙 수정으로 이동)” 중 선택할 수 있다.
- 입력:
  - 대상 거래 ID(반복에서 생성된 회차), 연결된 반복 규칙 ID, 사용자 액션(이 거래만 수정/삭제, 이후 회차까지 적용 등), 수정할 필드(금액/카테고리/메모 등)
- 출력:
  - 수정/삭제된 거래 내역, 예외 처리 플래그(이 회차만 예외), 필요한 경우 반복 규칙 수정 화면으로의 이동 정보, 이후 동일 날짜에 대한 중복 생성 방지용 예외 기록
- 우선순위: 중
- 관련 화면 ID: SCR-TRN-DETAIL, SCR-PLN-RECUR-LIST
- 비고: 고도화 기능이지만, 실제 서비스에서 반복 거래 사용할 때 거의 필수에 가까운 예외 처리 로직

---

## 보고서/분석

### RPT-001

- 기능명: 대시보드 레이아웃 & 위젯 구성
- 기능 상세설명:
  - 사용자가 로그인 후 가장 먼저 보는 대시보드 화면의 기본 레이아웃을 정의하는 기능. 그리드 형태 위에 위젯(총 순자산, 월별 지출 분석, 예산 현황, 주간 수입/지출, 다가오는 정기 내역, 최근 거래)을 배치하고, 위젯의 위치/표시 여부를 사용자가 커스터마이징할 수 있도록 한다. 대시보드 레이아웃 설정은 “사용자 + 가계부” 단위로 저장되어, 다른 기기나 브라우저에서 접속해도 동일한 구성이 유지되어야 한다.
- 입력:
  - 현재 로그인 사용자 ID, 사용자의 대시보드 레이아웃 설정(위젯 on/off, 위치/사이즈 정보), 현재 선택된 가계부 ID
- 출력:
  - 렌더링할 위젯 목록(각 위젯 타입, 위치, 사이즈, 표시 여부), 위젯별 초기 데이터 바인딩 정보(예: 총 순자산 값, 이번 달 지출 합계 등), 사용자가 수정한 레이아웃 설정값(서버/스토리지에 저장되는 최종 레이아웃)
- 우선순위: 상
- 관련 화면 ID: SCR-RPT-DASHBOARD
- 비고: 기존 [RPT-01] 기반, 커스터마이징 & 지속성 포함

---

### RPT-002

- 기능명: 대시보드 데이터 실시간 반영
- 기능 상세설명:
  - 거래 입력/수정/삭제, 자산 변경, 예산 변경 등이 발생했을 때, 대시보드 위젯(총 순자산, 월별 지출 분석, 예산 현황, 최근 거래, 다가오는 정기 내역)이 즉시 갱신되도록 하는 기능. 데이터가 없는 초기 상태에서는 “첫 거래를 기록해보세요” 등의 안내 문구를 보여준다. 실시간 반영 방식은 WebSocket/이벤트 기반 실시간 업데이트 또는 대시보드 재진입/새로고침 시 최신 데이터 재조회 방식 중 서비스 설계에 따라 선택할 수 있으나, 사용자 관점에서는 “변경 후 바로 반영된 것처럼 보이는 것”이 보장되어야 한다.
- 입력:
  - 이벤트 타입(새 거래/수정/삭제, 자산 변경, 예산 변경 등), 변경된 리소스 ID들, 현재 대시보드가 보고 있는 기간/가계부 정보
- 출력:
  - 업데이트된 위젯별 데이터(새로운 총 순자산, 이번 달 카테고리별 지출 TOP5, 예산 소진율, 최근 거래 리스트 등), 데이터 없음 상태일 때의 안내 메시지(“데이터가 없습니다. 첫 거래를 기록해보세요!” 등), 실시간/지연 반영 여부 플래그(내부용)
- 우선순위: 상
- 관련 화면 ID: SCR-RPT-DASHBOARD
- 비고: [RPT-01] 수용 조건 구현, 이벤트 기반 UI 갱신

---

### RPT-003

- 기능명: 예산 예측 메시지 로직
- 기능 상세설명:
  - [RPT-01.1]에서 정의된 지능형 예산 예측 메시지를 생성하는 기능. 현재 예산 소진율(percentage)과 서버 계산 예측 값(prediction: overspending, estimatedDate, savedAmount)을 입력으로 받아, 소진율 구간(0~50 / 50~80 / 80~100 / 100% 초과)에 따라 서로 다른 메시지와 상태 색상(위험/경고/안정/안전)을 반환한다. 이 로직은 대시보드의 “월별 예산 현황” 위젯 및 예산 보고서에서 공통으로 사용된다.
- 입력:
  - 현재 예산 소진율(percentage, 0~N%), 예측 객체(prediction.overspending, prediction.estimatedDate, prediction.savedAmount), 화폐 단위(currency)
- 출력:
  - 최종 메시지 텍스트(예: “현재 추세라면 5월 28일에 예산을 초과할 수 있어요 ⚠️”), 메시지 상태 타입(danger/warning/stable/safe), UI에 적용할 색상/아이콘 정보, 메시지 비표시 조건(데이터 부족 시)
- 우선순위: 상
- 관련 화면 ID: SCR-RPT-DASHBOARD
- 비고: [RPT-01.1] 직접 구현 로직, BUD/RPT 공통 유틸

---

### RPT-004

- 기능명: 자산 보고서 (자산/부채/순자산)
- 기능 상세설명:
  - [RPT-02]의 요구사항. 특정 기간을 월/분기/연 단위로 선택해 총 자산, 총 부채, 순자산의 추이를 꺾은선 그래프와 표로 보여주는 보고서. 각 시점별 금액과 이전 시점 대비 증감액/증감률을 함께 제공하고, 그래프 범례 클릭으로 라인 온/오프가 가능하다. 데이터가 없는 기간은 그래프에 표시하지 않는다.
- 입력:
  - 선택한 기간 타입(월/분기/연), 기간 범위(예: 시작월~종료월), 기준 가계부 ID, 자산/부채/순자산 집계에 사용할 원시 거래/자산 잔액 데이터(AST-001, AST-008에서 제공)
- 출력:
  - 그래프용 시계열 데이터(각 시점별 총자산/총부채/순자산 값), 표용 데이터(각 시점별 금액 + 증감액 + 증감률), 숨겨진 라인 상태(예: 부채 라인 off 여부), 데이터 없음 상태 플래그
- 우선순위: 중
- 관련 화면 ID: SCR-RPT-ASSET
- 비고: 기존 [RPT-02], AST-001/AST-008 자산 잔액 로직 기반

---

### RPT-005

- 기능명: 예산 보고서 (월별 예산 vs 지출)
- 기능 상세설명:
  - [RPT-03]의 요구사항. 선택한 월의 총예산/총지출/남은 예산을 상단 카드로 요약하고, 예산 기준(분류별/자산별/복합)에 따라 각 항목별 예산 금액, 실제 지출액, 남은 금액을 리스트 + 프로그레스 바로 보여주는 기능. 소진율에 따라 바 색상이 초록→노랑→빨강으로 변경된다. 예산 데이터는 BUD-001~BUD-007에서 정의된 기준/금액/이월 정책을 그대로 반영해야 한다.
- 입력:
  - 대상 월(YYYY-MM), 기준 가계부 ID, 예산 설정 데이터(BUD-001~BUD-007에서 생성된 예산 구조 및 이월 금액), 실제 지출 집계 데이터(해당 월 거래합계, 카테고리/자산별)
- 출력:
  - 상단 요약 카드 데이터(총예산/총지출/남은 예산), 항목별 리스트 데이터(카테고리/자산 이름, 예산, 실제 지출, 남은 금액, 소진율%), 각 항목 프로그레스 바 상태(색상/퍼센티지), 이월분 표시(기본 예산 vs 이월 금액 분리 표기 등)
- 우선순위: 중
- 관련 화면 ID: SCR-RPT-BUDGET
- 비고: BUD-001~BUD-007(예산 기준/금액/이월 정책)과 연동

---

### RPT-006

- 기능명: 태그 리포트 (#프로젝트 단위)
- 기능 상세설명:
  - [RPT-04]의 요구사항. 사용자가 선택한 태그(예: #여름휴가)를 기준으로 해당 태그가 달린 거래를 분석하는 기능. 상단에 총 지출액, 거래 건수, 거래 기간(첫 거래일~마지막 거래일)을 요약하고, 카테고리별 비중 파이 차트와 태그가 달린 모든 거래 내역 리스트를 최신순으로 보여준다. 프로젝트/이벤트 단위 비용 분석에 사용된다.
- 입력:
  - 선택한 태그 문자열(예: #여름휴가), 기간 필터(선택), 기준 가계부 ID, 태그가 포함된 거래 목록/합계 데이터(TRN 태그 필드 기반)
- 출력:
  - 요약 정보(총 지출액, 거래 건수, 기간), 카테고리별 지출 합계/비율 데이터(파이 차트용), 태그가 포함된 개별 거래 목록(날짜, 내용, 금액, 카테고리, 자산 등), 데이터 없음 시 안내 문구
- 우선순위: 중
- 관련 화면 ID: SCR-RPT-TAG
- 비고: TRN- 태그 입력/관리와 연동되는 태그 단위 리포트

---

### RPT-007

- 기능명: 현금 흐름 예측 캘린더
- 기능 상세설명:
  - [RPT-05]의 요구사항. REC-001~REC-005에서 설정된 반복 거래 데이터(고정 수입/지출)와 BUD-001~BUD-007에서 정의한 월별 예산 데이터를 기반으로, 선택한 계좌(또는 전체 자산)의 미래 날짜별 예상 잔액을 캘린더로 보여주는 기능. 잔액이 0 이하로 떨어질 것으로 예상되는 날짜는 빨간 텍스트/아이콘 등으로 강조하여 경고한다. 큰 수입/지출 이벤트(월급/카드값 등)는 캘린더 셀에 하이라이트 표시할 수 있다.
- 입력:
  - 선택한 계좌 ID 또는 “전체 자산” 옵션, 예측 범위(예: 앞으로 1~3개월), 반복 거래 규칙 목록(REC-001~REC-005), 월별 예산 데이터(BUD-001~BUD-007), 현재 잔액(AST-001/AST-008)
- 출력:
  - 날짜별 예상 잔액 시계열 데이터, 캘린더 셀에 표시할 요약 값(예: “₩350,000”), 마이너스 예상일 리스트(경고 마커 포함), 예측에 사용된 주요 이벤트(큰 지출/수입) 하이라이트 정보, 예측 정확도/가정 정보(선택)
- 우선순위: 하
- 관련 화면 ID: SCR-RPT-CASH-FLOW
- 비고: 프리미엄 기능 후보, REC/BUD/AST와 복합 연동

---

### RPT-008

- 기능명: 재무 건강 점수 계산
- 기능 상세설명:
  - [RPT-06] 중 점수 계산 부분. 수입 대비 저축률, 소비 구조(고정비/변동비 비율), 예산 준수율, 과소비 카테고리 비중 등 여러 지표를 조합해서 0~100점 사이의 재무 건강 점수를 계산하는 기능. 각 지표별 가중치/계산 로직은 서버 설정값으로 관리하고, 향후 조정 가능해야 한다.
- 입력:
  - 분석 대상 기간(보통 지난 달), 사용자의 수입·지출 집계 데이터, 예산 설정 및 실제 지출 데이터, 카테고리별 고정비/변동비 구분 정보, 저축/투자 금액 정보
- 출력:
  - 최종 점수(0~100), 지표별 점수/기여도, “이달 점수 변화”(전월 대비 ↑/↓), 등급(예: A/B/C 등급), 내부용 디버깅 데이터(각 지표별 원시 값)
- 우선순위: 하
- 관련 화면 ID: SCR-RPT-HEALTH
- 비고: 고도화 기능, GOL/BUD/RPT 데이터에 의존

---

### RPT-009

- 기능명: 재무 분석 & 개선 조언 메시지
- 기능 상세설명:
  - [RPT-06] 중 분석/조언 부분. RPT-008에서 계산한 점수와 세부 지표를 기반으로, “식비 비중이 높은 편이에요. 배달 지출을 줄여보세요.”처럼 간단한 개선 조언 텍스트를 생성하는 기능. 특정 패턴(예: 특정 카테고리 비중 30% 이상, 저축률 5% 미만 등)에 따라 템플릿 메시지를 매핑하며, 한 번에 1~3개의 핵심 메시지만 노출한다.
- 입력:
  - 재무 건강 점수, 각 지표 값(저축률, 예산 준수율, 카테고리별 비율 등), 임계값 설정(과소비 판단 기준, 저축률 목표 등), 메시지 템플릿 목록
- 출력:
  - 사용자에게 보여줄 조언 메시지 리스트(예: 1~3개), 각 메시지의 관련 지표 정보(“식비 35%”, “저축률 5%” 등), 향후 챌린지 추천에 사용할 힌트 태그(예: “식비절감”, “저축률개선”)
- 우선순위: 하
- 관련 화면 ID: SCR-RPT-HEALTH
- 비고: 템플릿 기반 메시지 엔진, i18n 적용 대상

---

### RPT-010

- 기능명: 챌린지 현황 & 리워드 연동
- 기능 상세설명:
  - [RPT-06] 중 챌린지 부분 + 포인트 시스템(PNT-)과 연계. “이번 주 카페 지출 1만원 이하”, “무지출 데이 3일” 같은 챌린지의 진행도를 보여주고, 성공 시 배지나 포인트를 지급하는 기능. 각 챌린지별 조건(기간, 대상 카테고리/태그, 금액/횟수 조건)을 평가하여 완료 여부를 판단한다. 챌린지 완료 시 PNT-002(포인트 적립 처리)를 호출해 포인트를 지급할 수 있다.
- 입력:
  - 등록된 챌린지 정의(조건식, 기간, 대상 카테고리/태그 등), 사용자의 실제 거래 데이터(해당 기간), 현재 진행 중/완료된 챌린지 목록, 포인트 규칙(PNT-001~PNT-002)
- 출력:
  - 챌린지별 진행도(예: 2/3일, 7,000/10,000원), 완료 여부 플래그, 성공 시 지급할 리워드 정보(배지, 포인트 N점), 사용자에게 보여줄 요약 카드(“이번 주 챌린지 2개 중 1개 달성!” 등), 이미 보상 지급 여부 플래그
- 우선순위: 하
- 관련 화면 ID: SCR-RPT-CHALLENGE
- 비고: PNT-001~PNT-009(포인트/상점)과 직접 연동

---

### RPT-011

- 기능명: 연간 재무 요약 리포트
- 기능 상세설명:
  - 특정 연도 기준으로 연간 총 수입/지출, 카테고리별 합계, 고정비 vs 변동비 비율을 한 페이지에 요약하여 보여주는 리포트. 세무/연말정산 준비용 혹은 장기 재무 패턴 분석용으로 사용된다. 월별 추세를 한 그래프에, 연간 비율을 파이/바 차트로 제공한다.
- 입력:
  - 연도(YYYY), 기준 가계부 ID, 해당 연도 모든 거래 집계 데이터(카테고리/자산/태그 기준), 고정비/변동비 구분 정보
- 출력:
  - 연간 요약 카드(총 수입, 총 지출, 순저축 등), 고정비/변동비 비율, 카테고리별 연간 지출 TOP N, 월별 수입/지출 추이 그래프 데이터, 연간 합계/평균 등 표 데이터
- 우선순위: 중
- 관련 화면 ID: SCR-RPT-YEARLY
- 비고: RPT-004/005 위에 앉는 상위 연간 리포트

---

### RPT-012

- 기능명: 연도 간 비교 리포트
- 기능 상세설명:
  - 선택한 2개 이상의 연도(예: 작년 vs 올해)의 지출 구조 변화, 저축률 변화, 특정 카테고리 증감을 비교하는 리포트. “작년에 비해 식비가 20% 늘었습니다” 같은 인사이트를 제공한다. 연도별 주요 지표(총 지출, 저축률, 카테고리 비중 등)를 나란히 보여주고, 증감액/증감률을 계산해 증감 TOP3 카테고리를 추출한다.
- 입력:
  - 비교 대상 연도 리스트(예: 2024, 2025), 각 연도별 집계 데이터(카테고리/자산/태그 기준), 고정비/변동비 구분 정보
- 출력:
  - 연도별 주요 지표 비교 표(총 지출, 저축률, 카테고리 비중 등), 증감률/증감액 계산 결과, “증가한 카테고리 TOP3 / 감소한 카테고리 TOP3” 리스트, 시각화용 바/라인 차트 데이터
- 우선순위: 하
- 관련 화면 ID: SCR-RPT-YEARLY-COMP
- 비고: 연간 분석(RPT-011) 확장, UX/분석 고도화용

---

## 가계부설정

### SET-001

- 기능명: 가계부 기본 정보 설정
- 기능 상세설명:
  - 현재 사용 중인 가계부의 이름, 설명, 기본 화폐 단위를 수정하는 기능. 화폐 단위는 KRW, USD, JPY 등 드롭다운으로 선택. 이름/설명은 글자 수 제한 및 XSS 방어 등 유효성 검사를 수행. 기본 화폐 변경 시 기존 거래/보고서 표시에 영향을 주므로 “화폐 단위 변경 시 표시가 달라질 수 있습니다” 같은 안내 문구 제공.
- 입력:
  - 선택한 가계부 ID, 변경할 가계부 이름, 설명, 화폐 단위(KRW/USD/JPY 등)
- 출력:
  - 저장 성공 여부, 변경된 가계부 정보(이름/설명/화폐), 상단 헤더/대시보드/보고서에 반영된 새 이름·화폐 단위
- 우선순위: 중
- 관련 화면 ID: SCR-SET-LEDGER
- 비고: 기존 [SET-001] 기본 정보 부분

---

### SET-002

- 기능명: 가계부 월 시작일 설정
- 기능 상세설명:
  - 가계부의 “이번 달” 계산 기준일을 1일 또는 1~28일 중 사용자가 지정할 수 있게 하는 기능. 시작일을 변경하면 모든 보고서/대시보드의 기간 기준이 바뀌므로, “시작일 변경 시 모든 보고서와 대시보드가 재계산됩니다. 적용하시겠습니까?” 확인 모달 표시 후 적용. 예: 25일로 설정 시, 이번 달 = 전월 25일~당월 24일.
- 입력:
  - 선택한 가계부 ID, 새 월 시작일(1~28), 변경 확정 여부(모달 확인 버튼 클릭)
- 출력:
  - 저장 성공 여부, 새 월 시작일 값, 대시보드/보고서에서 사용하는 기준 기간(예: 이번 달 = 4/25~5/24) 재계산 결과, 사용자에게 보여줄 안내 문구
- 우선순위: 중
- 관련 화면 ID: SCR-SET-LEDGER
- 비고: RPT-001, RPT-004~005와 연동

---

## 가계부공유

### SHR-001

- 기능명: 가계부 멤버 목록 조회
- 기능 상세설명:
  - 공유 가계부에서 현재 참여 중인 멤버 목록을 보여주는 기능. 각 멤버의 프로필 이미지, 닉네임, 이메일(선택), 권한(읽기/편집), 참여일을 리스트 또는 카드 형태로 표시한다. 멤버 수가 많을 경우 스크롤/페이지네이션을 지원하고, 필요 시 닉네임 검색/정렬 기능을 제공할 수 있다. (이 요구사항은 “보기”에만 집중, 편집/강퇴는 별도 기능에서 담당.)
- 입력:
  - 가계부 ID, 멤버 목록 조회 요청, 로그인한 사용자 ID(권한 체크용)
- 출력:
  - 멤버 리스트(프로필 이미지, 닉네임, 이메일, 권한, 참여일), 소유자/본인 여부 플래그, 편집/강퇴 버튼 노출 여부(소유자에게만 true)
- 우선순위: 중
- 관련 화면 ID: SCR-SET-LEDGER
- 비고: 기존 [SET-001] 멤버 관리 중 “목록 표시” 역할만 분리

---

### SHR-002

- 기능명: 가계부 초대 메일 발송
- 기능 상세설명:
  - 가계부 소유자(또는 권한 있는 사용자)가 “멤버 초대” 버튼을 눌러 이메일 주소와 권한(읽기 전용/편집 가능)을 입력하면, 해당 이메일로 초대 메일을 발송하는 기능. 초대 상태는 “초대 수락 대기 중”으로 저장되며, 이미 초대된 이메일이나 가입되어 있지 않은 이메일 처리 정책을 정의.
- 입력:
  - 가계부 ID, 초대할 이메일 주소, 부여할 권한(읽기/편집), 초대 메시지(선택)
- 출력:
  - 발송된 초대 정보(초대 ID, 이메일, 권한, 생성일, 상태=대기 중), 메일 발송 성공/실패 결과, 가계부 설정 화면의 “초대 수락 대기 중” 목록 업데이트
- 우선순위: 중
- 관련 화면 ID: SCR-SET-LEDGER
- 비고: USR-005(초대 수락/거절)과 연결

---

### SHR-003

- 기능명: 초대 수락/거절 처리
- 기능 상세설명:
  - 초대받은 사용자가 초대 메일의 링크를 클릭하면 가랑비 로그인/회원가입 후 “OOO님이 ‘가족 가계부’에 초대했습니다. 수락하시겠습니까?” 모달로 안내하고, 수락 시 해당 가계부를 자신의 가계부 목록에 추가, 거절 시 초대 상태를 거절로 변경하고 목록에서 숨김.
- 입력:
  - 초대 토큰/초대 ID, 로그인한 사용자 ID, 사용자의 선택(수락/거절)
- 출력:
  - 수락/거절 처리 결과, 수락 시: 내 가계부 목록에 새 가계부 추가, 공유 멤버 목록에 해당 사용자 추가, 초대 상태 업데이트(수락 완료). 거절 시: 초대 상태=거절, 초대 관리 목록에서 제거 또는 비활성화
- 우선순위: 중
- 관련 화면 ID: SCR-USER-INVITE
- 비고: USR-005과 합쳐서 보이지만 기능은 SET 영역

---

### SHR-004

- 기능명: 가계부 멤버 권한 변경/강퇴
- 기능 상세설명:
  - 가계부 소유자가 멤버의 권한(읽기 전용/편집 가능)을 변경하거나, 필요 시 가계부에서 강퇴할 수 있는 기능. 본인은 강퇴할 수 없고, 소유자 권한은 일반 멤버가 변경할 수 없다. 권한 변경/강퇴 후에는 멤버의 UI 권한(편집 버튼, 삭제 버튼 등)이 즉시 반영되어야 한다. 강퇴 시 확인 모달을 띄우고, 선택적으로 강퇴된 멤버에게 알림/이메일을 보낼 수 있다.
- 입력:
  - 가계부 ID, 대상 멤버 ID, 변경할 권한 값(읽기/편집), 강퇴 액션 플래그, 요청자(로그인 사용자) ID
- 출력:
  - 권한 변경 결과(성공/실패, 실패 이유), 강퇴 후 갱신된 멤버 리스트, 강퇴된 사용자에게 보낼 알림 payload(선택)
- 우선순위: 중
- 관련 화면 ID: SCR-SET-LEDGER
- 비고: 기존 SHR-001에서 “목록”과 분리된 액션 영역

---

## 구독/플랜

### SUB-001

- 기능명: 플랜 정의(무료/프리미엄)
- 기능 상세설명:
  - 백엔드에서 무료(Free) / 프리미엄(Premium) 플랜을 정의하고, 각 플랜별 기능 제한을 설정하는 기능. 예: 무료 = 가계부 최대 3개, 공유 최대 1명, 일부 리포트 비활성 / 프리미엄 = 가계부 무제한, 공유 최대 5명, 고급 리포트·자동 연동 활성 등. 이 플랜 정의는 다른 기능(가계부 생성, 리포트 접근, 공유 인원 관리, 금융 연동 등)에서 공통으로 참조되며, 플랜 정의 변경 시 관련 기능 제한이 일관되게 반영되어야 한다.
- 입력:
  - 플랜 코드(FREE, PREMIUM), 각 플랜의 기능 플래그(가계부 최대 개수, 공유 인원, 사용 가능 메뉴 ID 목록, 광고 ON/OFF, 프리미엄 전용 기능 플래그 등)
- 출력:
  - 현재 지정된 플랜 정의 목록(플랜명, 설명, 가격 정보, 기능 제한 설정), 다른 API/서비스 레이어에서 참조할 수 있는 플랜별 권한/제한 정보
- 우선순위: 상
- 관련 화면 ID: (어드민/시스템 설정)
- 비고: 기존 FUT-02 “플랜 구분” 부분, SUB-003/004/009/010에서 공통 참조

---

### SUB-002

- 기능명: 플랜 비교 페이지
- 기능 상세설명:
  - 사용자에게 무료/프리미엄 플랜의 차이를 한눈에 보여주는 플랜 비교 페이지. 표 형식으로 기능별 Free/Premium 가능 여부를 표시하고, 월간/연간 가격, 혜택 요약, “업그레이드” 버튼 등을 배치한다. 현재 사용 중인 플랜은 강조 표시하고, Premium 선택 시 체크아웃 화면으로 이동할 수 있어야 한다. 마케팅 카피, 강조 배지(추천, BEST 등)는 디자인/콘텐츠 리소스에 따라 관리한다.
- 입력:
  - 현재 사용자 플랜 정보, 플랜 정의(SUB-001), 가격 정보(월/연), 로컬라이즈된 카피 텍스트, 언어/지역 설정(i18n)
- 출력:
  - 플랜 비교 표 데이터(행: 기능, 열: Free/Premium 가능 여부), 가격 영역(월/연 구분, 할인율 등), 현재 사용 중인 플랜 강조 상태, 업그레이드/다운그레이드 버튼 상태 및 이동할 라우팅 정보
- 우선순위: 중
- 관련 화면 ID: SCR-SUB-PLAN-COMPARE
- 비고: 무료 유저 업셀링 핵심 화면, SUB-005(체크아웃)으로 진입

---

### SUB-003

- 기능명: 플랜 기반 기능 접근 제어(백엔드)
- 기능 상세설명:
  - “가계부 생성”, “공유 멤버 추가”, “고급 리포트 접속”, “금융사 자동 연동” 등 특정 기능을 호출할 때마다 사용자의 현재 플랜과 제한 조건을 검증하는 미들웨어/서비스. 예: 무료 플랜 사용자가 4번째 가계부 생성 시도 시, 403 또는 커스텀 에러 코드를 반환하고, 클라이언트는 해당 에러를 기반으로 업그레이드 안내를 띄운다. 이 로직은 서버 공통 레이어에서 동작하며, 각 도메인 API는 결과만 받아 처리한다.
- 입력:
  - 요청 사용자 ID, 현재 사용자 플랜 코드(FREE/PREMIUM), 호출 기능 코드(예: LEDGER_CREATE, MEMBER_INVITE, RPT_CASHFLOW, BNK_CONNECT 등), 현재 사용량(가계부 개수, 공유 인원수, 프리미엄 전용 기능 사용 여부 등)
- 출력:
  - 접근 허용/차단 결과(불리언), 차단 시 에러 코드/메시지(“가계부는 최대 3개까지 만들 수 있습니다. 프리미엄으로 업그레이드해 주세요.” 등), 클라이언트 업셀링 팝업에 사용할 텍스트/링크, 로깅용 접근 제어 결과 기록
- 우선순위: 상
- 관련 화면 ID: 서버 공통 레이어, 각 기능 API
- 비고: 기존 FUT-02 “프리미엄 기능 제한 로직” 핵심, SUB-004에서 에러 코드를 받아 팝업 처리

---

### SUB-004

- 기능명: 기능 제한 업그레이드 유도 팝업
- 기능 상세설명:
  - 무료 사용자가 제한을 넘는 행동을 했을 때(예: 4번째 가계부 생성 버튼 클릭, 프리미엄 전용 리포트 진입, 금융사 자동 연동 시도 등), 백엔드에서 반환된 에러 코드/메시지를 기반으로 플랜 업그레이드 팝업을 띄우는 기능. 팝업에는 현재 제한 상황 설명과 함께 플랜 비교 페이지 또는 결제 화면으로 가는 버튼을 노출한다. 동일 에러가 반복될 경우 중복 팝업 방지 정책도 적용할 수 있다.
- 입력:
  - 백엔드에서 온 에러 코드/메시지, 현재 사용자 플랜, 시도한 기능 코드, 현재 화면 정보
- 출력:
  - 업그레이드 유도 팝업 콘텐츠(제목, 설명, 버튼 텍스트, 이동할 화면 라우팅 정보), 팝업 노출 여부/횟수, 사용자의 버튼 클릭 결과(플랜 비교 이동, 체크아웃 이동, 닫기 등)
- 우선순위: 중
- 관련 화면 ID: 각 제한 기능 화면(SCR-LEDGER-_, SCR-RPT-_, SCR-BNK-_, SCR-PLN-_)
- 비고: SUB-003의 접근 제어 에러를 UX로 노출하는 레이어, 플랜 비교(SUB-002)·결제(SUB-005)와 연결

---

### SUB-005

- 기능명: 프리미엄 플랜 결제(체크아웃)
- 기능 상세설명:
  - 사용자에게 프리미엄 플랜을 결제할 수 있는 체크아웃 화면. 국내 PG사(토스페이먼츠, KG이니시스 등)와 연동하여 카드/계좌/간편결제 등 수단으로 월간/연간 결제를 수행한다. 선택한 플랜·주기 정보를 PG에 넘기고, 결제 완료 후 웹훅/콜백을 통해 구독 상태를 업데이트한다. 결제 도중 취소/실패 시 적절한 안내 및 재시도 옵션을 제공해야 한다.
- 입력:
  - 선택한 플랜 코드(PREMIUM), 결제 주기(월/년), 사용자 ID, PG 결제 세션 요청 정보(금액, 주문번호, 리디렉트 URL 등), 브라우저/디바이스 정보
- 출력:
  - PG 결제 창 URL 또는 위젯 정보, 결제 요청 상태(대기/진행/취소), 결제 완료 후 콜백에서 받을 거래 ID/승인 번호/결제 금액, 결제 성공/실패 결과 및 사용자에게 보여줄 안내 메시지
- 우선순위: 상
- 관련 화면 ID: SCR-SUB-CHECKOUT
- 비고: FUT-02 “결제 시스템 연동” 구현, SUB-006(웹훅 처리)와 세트로 동작

---

### SUB-006

- 기능명: 구독 상태 업데이트(웹훅 처리)
- 기능 상세설명:
  - PG로부터 오는 정기 결제 성공/실패 웹훅을 받아 사용자의 구독 상태를 업데이트하는 기능. 성공 시 구독 시작일/다음 결제일/플랜 코드(PREMIUM)를 저장하고, 실패/만료 시 유예 기간 후 플랜 다운그레이드 처리 등 정책을 적용한다. 중복 웹훅이나 재전송에 대한 idempotent 처리도 고려해야 하며, 이 로직은 보안상 서버에서만 처리된다.
- 입력:
  - PG 웹훅 데이터(주문번호, 결제 결과, 금액, 사용자 식별 정보 등), 현재 저장된 구독 정보(시작일, 다음 결제일, 상태 등), 다운그레이드 정책 설정 값
- 출력:
  - 업데이트된 구독 상태(예: ACTIVE, PAST_DUE, CANCELED), 다음 결제 예정일, 실패/취소 시 다운그레이드 예약 정보, 결제 결과 로그/에러 기록, UI에 전달할 요약 상태(예: “결제 실패, 재시도 필요”)
- 우선순위: 상
- 관련 화면 ID: (백엔드 전용)
- 비고: 정기 결제 핵심 로직, SUB-005(체크아웃)·SUB-007(구독 관리)와 연동

---

### SUB-007

- 기능명: 구독 관리 화면(상태/해지)
- 기능 상세설명:
  - 사용자 마이페이지 내 구독 관리 화면. 현재 플랜, 결제 주기(월/년), 다음 결제일, 구독 상태(ACTIVE/PENDING/CANCELED 등), 결제 수단 일부 마스킹 정보, 결제 내역 화면 링크 등을 보여준다. “구독 해지” 버튼으로 정기 결제를 중단할 수 있게 하고, 해지 정책(즉시 Free로 전환 vs 결제 기간 종료 후 적용)을 명확히 안내한다.
- 입력:
  - 사용자 ID, 현재 구독 정보(플랜 코드, 시작일, 다음 결제일, 상태, 결제 수단 등)
- 출력:
  - 화면에 표시할 구독 요약 정보(예: “Premium · 월 구독 · 다음 결제일 5월 3일”), 해지 버튼 상태 및 해지 확인 모달, 해지 요청 결과(해지 예정일, 즉시 다운그레이드 여부), 결제 내역 화면 이동 링크
- 우선순위: 상
- 관련 화면 ID: SCR-SUB-MANAGE
- 비고: FUT-02 “구독 관리 페이지” 구현, SUB-006(상태 업데이트), SUB-010(다운그레이드 처리)와 연결

---

### SUB-008

- 기능명: 결제/구독 내역 조회
- 기능 상세설명:
  - 사용자의 구독 결제 내역을 리스트로 보여주는 기능. 각 행에 결제일, 금액, 결제 수단, 상태(성공/실패/환불), PG 거래 ID, 필요 시 영수증/세금계산서 링크를 표시한다. 기간 필터와 간단한 정렬 옵션(최근 순 등)을 제공하여, 사용자가 과거 결제를 쉽게 확인할 수 있도록 한다.
- 입력:
  - 사용자 ID, 기간 필터(예: 최근 3개월/1년), 페이지 번호/페이지 크기, 상태 필터(성공/실패/환불 등)
- 출력:
  - 결제 내역 리스트(일시, 금액, 상태, 결제 수단, PG 거래 ID, 영수증/세금계산서 URL), 총 건수/페이지 정보, 데이터 없음 시 안내 메시지(“결제 내역이 없습니다”)
- 우선순위: 하
- 관련 화면 ID: SCR-SUB-HISTORY
- 비고: 회계/CS 대응용, 우선순위 낮게 시작 가능, SUB-007에서 링크로 진입

---

### SUB-009

- 기능명: Free → Premium 업그레이드 후 처리
- 기능 상세설명:
  - 무료 사용자가 프리미엄으로 업그레이드 완료 시, 기존에 제한되어 있던 기능(가계부 개수 제한, 공유 인원 제한, 고급 리포트, 금융사 자동 연동 등)을 즉시 해제하고 UI에서 관련 메뉴를 활성화하는 기능. 첫 업그레이드 시 환영 메시지/툴팁으로 새 기능을 소개하고, 대시보드나 플랜 비교 화면에서 자연스럽게 프리미엄 기능을 체험하도록 유도할 수 있다.
- 입력:
  - 업그레이드 성공 이벤트(결제 완료 콜백), 사용자 ID, 이전 플랜 코드(FREE), 새 플랜 코드(PREMIUM), 활성화해야 할 프리미엄 전용 기능 목록
- 출력:
  - 업데이트된 사용자 플랜 상태, 해제된 기능 목록(“가계부 최대 개수 제한 해제” 등), 대시보드/설정/보고서/금융 연동 메뉴에서 활성화된 항목, 첫 업그레이드 환영 메시지/배너 상태 및 노출 여부
- 우선순위: 중
- 관련 화면 ID: SCR-SUB-MANAGE, 전체 화면
- 비고: 프리미엄 전환 UX 핵심, RPT-007(현금 흐름 예측), RPT-006, BNK-001~004 등 프리미엄 전용 기능 활성화와 연동

---

### SUB-010

- 기능명: Premium → Free 다운그레이드 후 정리
- 기능 상세설명:
  - 프리미엄 사용자가 구독 해지 후 Free로 돌아갈 때, 제한 조건을 넘는 상태를 어떻게 처리할지 정의하고 실제로 적용하는 기능. 예: 가계부가 7개인 경우 Free 기준 3개만 활성, 나머지는 읽기 전용/숨김 처리. 공유 인원이 4명인 경우 Free 기준 1명만 유지, 나머지는 접근 차단 또는 안내. 제한 초과 리소스에 대해서는 명확한 안내 메시지와 정리 가이드를 제공해야 한다.
- 입력:
  - 다운그레이드 이벤트(구독 상태 ACTIVE → CANCELED or FREE), 사용자 ID, 현재 사용량(가계부 개수, 공유 인원 수, 사용 중 프리미엄 전용 기능 목록 등), 다운그레이드 정책 설정 값
- 출력:
  - 다운그레이드 후 적용된 제한 요약(“가계부 3개만 사용 가능, 나머지는 잠김” 등), 잠김/비활성 상태가 된 리소스 목록(가계부/공유 멤버/BNK 연동 등), 사용자에게 보여줄 안내 문구와 정리 가이드 링크, UI에서 비활성 상태 표시 방식
- 우선순위: 중
- 관련 화면 ID: SCR-SUB-MANAGE, SCR-LEDGER-LIST
- 비고: 정책 설계 중요, TRN-/LEDGER-/SET-/BNK- 기능과 연계되어야 함

---

## 테마/개인화

### THM-001

- 기능명: 라이트/다크 모드 전환
- 기능 상세설명:
  - 설정 화면 또는 상단 UI에서 사용자가 라이트/다크 모드를 전환할 수 있게 하는 기능. 현재 선택된 모드를 즉시 전역 스타일에 반영하고, 선택한 모드를 사용자 설정으로 저장한다. Tailwind 기반 색상 토큰(배경, 텍스트, 보더, 그림자 등)을 사용하여 네오 브루탈리즘 스타일이 라이트/다크 두 모드 모두에서 일관되게 보이도록 한다. 시스템 모드(system) 선택 시에는 THM-003과 연계된다.
- 입력:
  - 선택한 모드 값(light / dark / system), 현재 로그인 사용자 ID
- 출력:
  - 현재 적용 모드 상태, 앱 전역에 적용된 색상/스타일 토큰, 사용자 설정에 저장된 모드 값
- 우선순위: 중
- 관련 화면 ID: SCR-SET-THEME
- 비고: 기존 [SET-02] 테마 설정의 모드 전환 부분

---

### THM-002

- 기능명: 테마 선택 및 미리보기
- 기능 상세설명:
  - 라이트/다크 각 모드 내에서 여러 개의 테마(예: 기본, 코튼, 민트, 네이비, 차콜 등) 썸네일을 제공하고, 썸네일 클릭 시 현재 페이지 UI 전체를 해당 테마로 임시 적용해 미리보기를 제공하는 기능. “적용” 버튼을 눌러야 최종 저장되며, 적용된 테마에는 “적용 중” 라벨 또는 체크 표시를 보여준다. 테마는 Tailwind 프리셋(색상, 보더, 쉐도우, 라운딩 등) 조합으로 관리하여 네오 브루탈리즘 스타일을 유지한다.
- 입력:
  - 선택된 모드(라이트/다크), 선택한 테마 ID, “적용” 버튼 클릭 여부
- 출력:
  - 미리보기 상태일 때의 임시 테마 스타일, 최종 적용 후 사용자 설정에 저장된 테마 ID, 현재 테마가 적용된 UI 상태, 테마 목록에서 “적용 중” 표시 상태
- 우선순위: 중
- 관련 화면 ID: SCR-SET-THEME
- 비고: 네오 브루탈리즘 색/보더/쉐도우 토큰 관리, THM-001과 함께 동작

---

### THM-003

- 기능명: 시스템 설정 연동(자동 모드)
- 기능 상세설명:
  - “시스템 설정 따르기” 옵션을 켜면, 사용자의 OS(Windows / macOS / Android / iOS)의 다크 모드 설정에 따라 서비스 테마가 자동으로 전환되는 기능. OS 테마 변경 이벤트(prefers-color-scheme 등)를 감지하여 앱 테마를 자동 업데이트한다. 사용자가 수동으로 모드를 변경했을 때 시스템 동기화 옵션을 자동 해제할지, 그대로 둘지는 정책으로 정의한다.
- 입력:
  - 시스템 테마 값(light / dark), 시스템 연동 옵션 on/off, 사용자의 수동 모드 변경 액션
- 출력:
  - 최종 적용 모드 결정(시스템 연동 우선 or 사용자 수동 선택 우선), 앱 전역 테마 상태, 설정 화면에서 표시할 “시스템 설정 따름” 토글 상태
- 우선순위: 하
- 관련 화면 ID: SCR-SET-THEME
- 비고: 선택 기능, 초기 버전에서는 제외했다가 추후 추가해도 됨

---

## 거래관리

### TRN-001

- 기능명: 거래 기본 입력/저장
- 기능 상세설명:
  - 수입/지출/이체 거래를 새로 등록하는 기본 기능. 화면 전체 폼 또는 하단 모달 시트(Mobile First)로 구성한다. 거래 유형(수입/지출/이체)을 선택하는 세그먼트/탭을 제공하고, 선택된 유형에 따라 필요한 필드를 동적으로 표시한다. 필수 필드(날짜, 금액, 자산, 카테고리/분류)가 모두 채워져야 저장 가능하다. 저장 후 폼 초기화 및 성공 토스트를 표시한다.
- 입력:
  - 거래 유형(수입/지출/이체), 날짜/시간(기본: 현재), 금액, 자산, 카테고리, 태그(선택), 메모(선택)
- 출력:
  - 생성된 거래 ID, 거래 저장 성공/실패 여부, 필드별 검증 에러 메시지, “거래가 저장되었습니다” 토스트
- 우선순위: 상
- 관련 화면 ID: SCR-TRN-01
- 비고: 기존 [TRN-01]의 핵심 생성 기능

---

### TRN-002

- 기능명: 거래 수정
- 기능 상세설명:
  - 기존에 등록된 거래를 불러와 수정하는 기능. 거래 항목 클릭 시 동일한 입력 폼을 수정 모드로 열고, 이전에 입력한 값(이미지/태그/쪼개기 항목 포함)을 그대로 채워서 보여준다. 수정 후 저장 시 변경 이력을 남길 수 있도록 API 레벨에서 updatedAt, 수정자 등을 관리한다.
- 입력:
  - 거래 ID, 수정된 거래 데이터(필수/선택 필드 동일)
- 출력:
  - 수정된 거래 데이터, 수정 성공/실패 여부, 업데이트된 리스트/대시보드 반영
- 우선순위: 상
- 관련 화면 ID: SCR-TRN-01
- 비고: 생성/수정 UI 재사용

---

### TRN-003

- 기능명: 거래 삭제
- 기능 상세설명:
  - 거래 상세 화면 또는 목록에서 선택한 거래를 삭제하는 기능. 삭제 전에 확인 다이얼로그를 띄워 “해당 거래를 삭제하시겠습니까?”와 같은 경고 문구를 표시한다. 삭제 성공 후에는 목록/달력/대시보드/보고서의 합계·그래프가 즉시 갱신되어야 한다.
- 입력:
  - 거래 ID
- 출력:
  - 삭제 성공/실패 여부, 삭제 후 갱신된 목록/집계 정보, “삭제되었습니다” 토스트
- 우선순위: 상
- 관련 화면 ID: SCR-TRN-01 / SCR-TRN-02
- 비고:

---

### TRN-004

- 기능명: 날짜·시간 입력/선택
- 기능 상세설명:
  - 거래 입력/수정 시 날짜·시간을 선택하는 기능. 기본값은 현재 시각이며, 날짜 필드 클릭 시 달력 팝업, 시간 필드 클릭 시 시간 선택 UI를 제공한다. 모바일에서는 OS 기본 날짜/시간 피커와 자연스럽게 연동한다. 과거/미래 날짜 제한 정책(예: 너무 먼 미래 금지 등)이 있다면 여기서 정의한다.
- 입력:
  - 날짜(Date), 시간(Time)
- 출력:
  - ISO 형태 또는 백엔드 저장 형식의 datetime 값
- 우선순위: 상
- 관련 화면 ID: SCR-TRN-01
- 비고: TRN-001 세부 기능

---

### TRN-005

- 기능명: 금액 입력 및 포맷팅
- 기능 상세설명:
  - 금액 입력 시 모바일에서 숫자 키패드가 자동으로 뜨고, 입력되는 동안 천 단위 콤마(,)가 실시간으로 적용되는 기능. 0 이하 금액 방지, 소수점 사용 여부 정책, 최대 금액 제한 등을 검증한다. 내부적으로는 숫자 타입으로 저장되며, 표시용 포맷과 전송용 값은 분리한다.
- 입력:
  - 문자열 형태의 금액 입력값
- 출력:
  - 화면 표시용 포맷된 금액(예: 12,345), 서버 전송용 정수/실수 값
- 우선순위: 상
- 관련 화면 ID: SCR-TRN-01
- 비고: UX 품질에 중요

---

### TRN-006

- 기능명: 카테고리 선택 (2단계)
- 기능 상세설명:
  - 거래 입력 시 카테고리 선택 필드에서 대분류 목록을 먼저 보여주고, 선택 시 해당 대분류의 소분류 목록을 2-depth 구조로 표기하는 기능. “식비 > 카페”처럼 트리 구조를 명확히 표현한다. [CAT-001~010] 카테고리 관리와 연동하여 새로 추가된 카테고리가 즉시 반영되어야 한다.
- 입력:
  - 선택한 대분류 ID, 소분류 ID
- 출력:
  - 선택된 카테고리 전체 경로(예: “식비 > 카페”), 저장 시 카테고리 ID
- 우선순위: 상
- 관련 화면 ID: SCR-TRN-01
- 비고: CAT-그룹 연동

---

### TRN-007

- 기능명: 자산 선택
- 기능 상세설명:
  - 거래 입력 시 [AST-001~009]에서 정의된 자산 목록을 그룹별(현금/은행/카드/대출 등)로 보여주고, 해당 거래에 사용할 자산을 선택하는 기능. 그룹 헤더(예: “현금”, “은행”)로 구분하여 가독성을 높인다. 선택된 자산은 잔액 계산, 순자산 계산, 보고서 등과 연동된다.
- 입력:
  - 자산 그룹(현금/은행/카드 등), 자산 ID
- 출력:
  - 선택된 자산 ID, 자산명, 이후 잔액 계산에 사용될 기준
- 우선순위: 상
- 관련 화면 ID: SCR-TRN-01
- 비고: AST-그룹 연동

---

### TRN-008

- 기능명: 태그 입력 및 자동완성
- 기능 상세설명:
  - 거래에 # 형식의 태그를 여러 개 붙이는 기능. 태그 필드에 # 입력 시 기존 사용 태그 목록을 자동완성 드롭다운으로 제공한다. 선택된 태그는 Chip 형태로 표시하고, 각 태그는 X 버튼으로 제거 가능하다. 같은 태그를 중복 추가하지 않도록 방지한다.
- 입력:
  - 태그 문자열, 선택된 태그 리스트
- 출력:
  - 최종 태그 목록(문자열 배열), 태그 자동완성 후보 리스트
- 우선순위: 중
- 관련 화면 ID: SCR-TRN-01
- 비고: RPT-006(태그 리포트)와 연동

---

### TRN-009

- 기능명: 메모 입력
- 기능 상세설명:
  - 거래별로 간단한 설명을 남길 수 있는 텍스트 메모 기능. 글자 수 제한(예: 200자)과 금지어 정책이 있다면 여기에서 정의한다. 메모 내용은 목록/상세에서 일부 또는 전체가 노출되며, 검색 대상에도 포함될 수 있다.
- 입력:
  - 메모 텍스트
- 출력:
  - 저장된 메모 콘텐츠
- 우선순위: 하
- 관련 화면 ID: SCR-TRN-01
- 비고: 비교적 단순 기능

---

### TRN-010

- 기능명: 사진/영수증 첨부
- 기능 상세설명:
  - 각 거래에 이미지 파일(jpg, png, heic)을 1개 이상 첨부하는 기능. 업로드 후 썸네일 미리보기를 제공하고, 각 썸네일에는 삭제(X) 아이콘을 표시한다. 업로드 가능한 파일 크기/형식 제한 및 실패 시 에러 메시지 처리를 포함한다. 모바일 카메라/갤러리와 자연스럽게 연동된다.
- 입력:
  - 이미지 파일 목록, 첨부/삭제 액션
- 출력:
  - 업로드된 파일의 URL/ID 목록, 썸네일 표시용 데이터, 업로드 에러 메시지
- 우선순위: 중
- 관련 화면 ID: SCR-TRN-01
- 비고: OCR 기능(TRN-011)과 연계 가능

---

### TRN-011

- 기능명: 영수증 스캔(OCR)
- 기능 상세설명:
  - “스캔하여 입력” 버튼을 눌러 카메라 뷰를 열고, 촬영한 영수증 이미지를 서버로 전송해 OCR 처리 후 날짜, 금액, 상호명→메모 필드를 자동 채우는 기능. 사용자는 OCR 결과를 확인·수정 후 저장한다. 처리 중 로딩 스피너를 표시하고, 실패 시 재시도 안내를 제공한다.
- 입력:
  - 촬영한 영수증 이미지, OCR 요청 파라미터
- 출력:
  - OCR 추출 값(날짜, 금액, 상호명 등), 필드 자동 채움 결과, 실패/성공 메시지
- 우선순위: 중
- 관련 화면 ID: SCR-TRN-01-OCR
- 비고: 고도화 기능, 초기 버전에선 옵션

---

### TRN-012

- 기능명: 거래 쪼개기(Split)
- 기능 상세설명:
  - 한 거래를 여러 항목으로 나누어 기록하는 기능. “거래 쪼개기” 버튼 클릭 시 하단에 항목 행을 동적으로 추가할 수 있고, 각 항목에 카테고리/금액/메모를 입력한다. 총액과 각 항목 금액의 합이 일치하는지 실시간 검증하고, 불일치 시 저장 버튼 비활성화 + 경고 메시지를 표시한다.
- 입력:
  - 원 거래 총액, 각 쪼개기 항목(카테고리, 금액, 메모) 리스트
- 출력:
  - 검증 결과(합계 일치 여부), 쪼개기 항목 데이터 구조, 에러 메시지(“항목 합계가 총액과 일치하지 않습니다”)
- 우선순위: 중
- 관련 화면 ID: SCR-TRN-01-SPLIT
- 비고: RPT-005(예산 보고서) 등 통계에 영향

---

### TRN-013

- 기능명: 거래 목록 조회(리스트)
- 기능 상세설명:
  - 기본 거래 조회 화면. 기간·자산·카테고리·태그 등 필터에 따라 거래를 불러와 일별로 그룹화하여 리스트로 표시한다. 각 날짜 헤더에 해당일 총 수입/총 지출을 요약한다. 성능을 위해 무한 스크롤 또는 페이지네이션을 적용하고, 스크롤 시에도 부드럽게 동작하도록 최적화한다.
- 입력:
  - 기간(시작/종료일), 필터(자산, 카테고리, 태그, 거래 유형), 페이지/스크롤 위치
- 출력:
  - 거래 목록(일별 그룹), 각 일자별 합계, 페이지네이션 정보
- 우선순위: 상
- 관련 화면 ID: SCR-TRN-02
- 비고: 기존 [TRN-02]의 목록 뷰

---

### TRN-014

- 기능명: 거래 상세 보기
- 기능 상세설명:
  - 목록 또는 달력에서 거래를 클릭했을 때, 해당 거래의 상세 정보를 모달/사이드 패널로 읽기 전용으로 표시하는 기능. 금액, 거래 유형(수입/지출/이체), 날짜/시간, 카테고리, 자산, 태그, 메모, 첨부 이미지 썸네일, 쪼개기 항목(분할 내역) 등을 모두 확인할 수 있어야 한다. 공유 가계부인 경우, 댓글 영역을 표시할 컨테이너만 확보하고, 댓글 CRUD는 별도 기능에서 처리한다.
- 입력:
  - 거래 ID, 현재 가계부 ID, 로그인 사용자 ID(권한 판단용)
- 출력:
  - 거래 상세 데이터(저장된 모든 필드), 읽기 전용 표시 상태, 수정/삭제/댓글 버튼 노출 여부(권한에 따라 true/false)
- 우선순위: 상
- 관련 화면 ID: SCR-TRN-02-DETAIL
- 비고: 댓글/액션은 TRN-029에서 담당

---

### TRN-015

- 기능명: 거래 달력 뷰
- 기능 상세설명:
  - 거래 내역을 달력 형태로 조회하는 기능. 각 날짜 셀에 해당일 총수입(초록), 총지출(빨강)을 작은 텍스트나 배지로 표시한다. 날짜를 클릭하면 그 날짜의 거래 목록이 담긴 모달/패널을 보여준다. 현재 월/주 중심으로 이동할 수 있는 네비게이션(이전/다음 월)을 제공한다.
- 입력:
  - 대상 월/기간, 필터(선택)
- 출력:
  - 날짜별 집계 데이터(총 수입/지출), 달력 렌더링용 구조, 선택 날짜의 거래 목록
- 우선순위: 중
- 관련 화면 ID: SCR-TRN-02-CAL
- 비고: RPT-007(현금 흐름 예측)와 시각적으로 연관 가능

---

### TRN-016

- 기능명: 거래 필터/검색
- 기능 상세설명:
  - 목록/달력 상단에 접혀 있는 필터 패널. 기간/자산/카테고리/태그/거래 유형 필터를 동시에 적용할 수 있고, 조건은 AND로 동작한다. 적용된 필터는 상단에 Chip 형태로 표시되며, 각 Chip 클릭 시 해당 필터만 제거된다. 시작일 > 종료일이 되지 않도록 종료일 캘린더를 제한한다. 키워드 검색(메모/상호명 등)도 선택적으로 추가할 수 있다.
- 입력:
  - 필터 조건(기간, 자산 ID, 카테고리 ID, 태그, 거래 유형, 키워드), 초기화/적용 액션
- 출력:
  - 필터 적용 후 거래 목록/집계, 활성 필터 Chip 리스트, 잘못된 기간 선택 방지 로직
- 우선순위: 상
- 관련 화면 ID: SCR-TRN-02
- 비고: 기존 [TRN-02] 필터 부분 세분화

---

### TRN-017

- 기능명: 거래 목록 무한 스크롤
- 기능 상세설명:
  - 거래가 많은 경우에도 UX를 보장하기 위한 무한 스크롤 또는 페이지네이션 기능. 사용자가 스크롤을 내릴 때마다 다음 페이지 데이터를 가져와 리스트 뒤에 붙이는 방식. 로딩 스피너/“더 이상 내역이 없습니다” 안내를 표시한다. 초기 로딩 성능을 고려해 페이지 크기/쿼리를 최적화한다.
- 입력:
  - 현재 페이지/오프셋, 페이지 크기, 기존 필터 조건
- 출력:
  - 추가 거래 목록, 다음 페이지 존재 여부, 로딩 상태 플래그
- 우선순위: 중
- 관련 화면 ID: SCR-TRN-02
- 비고: 성능 관련, 구현 방법은 선택 가능

---

### TRN-018

- 기능명: 공유 가계부 댓글
- 기능 상세설명:
  - 공유 가계부에서 거래 상세 모달 내에 댓글 스레드를 제공하는 기능. 댓글 작성자 프로필/닉네임/작성 시간을 표시하고, 본인이 작성한 댓글에 대해 수정/삭제를 허용한다. 새 댓글 작성 시 관련 멤버에게 알림 아이콘 뱃지 등을 통한 실시간 알림을 보낼 수 있다.
- 입력:
  - 거래 ID, 댓글 내용, 댓글 수정/삭제 액션
- 출력:
  - 댓글 목록(작성자, 내용, 시간, 수정 여부), 실시간 알림 이벤트, 댓글 CRUD 결과
- 우선순위: 중
- 관련 화면 ID: SCR-TRN-02-DETAIL
- 비고: 공유 가계부에만 노출

---

### TRN-019

- 기능명: 거래 기반 실시간 알림
- 기능 상세설명:
  - 공유 가계부에서 다른 멤버가 거래를 추가/수정/삭제하거나 댓글을 달았을 때, 관련 사용자에게 실시간 알림(헤더 알림 아이콘 뱃지, 간단한 토스트 등)을 제공하는 기능. 알림 클릭 시 해당 거래 상세 또는 관련 화면으로 이동한다.
- 입력:
  - 이벤트 타입(거래 생성/수정/삭제, 댓글 작성 등), 대상 사용자 ID들
- 출력:
  - 알림 목록, 읽음 상태, 알림 표시(뱃지/토스트)
- 우선순위: 중
- 관련 화면 ID: SCR-TRN-02 / 글로벌 헤더
- 비고: UX-02, UX-04와 연관 가능

---

### TRN-029

- 기능명: 거래 상세 액션(수정/삭제/복제/댓글)
- 기능 상세설명:
  - 거래 상세 보기 화면에서 제공되는 액션 기능. 권한이 있는 사용자는 상세 화면에서 거래 수정, 삭제, 복제(동일 내용으로 새 거래 생성)를 할 수 있다. 공유 가계부인 경우, 댓글 스레드 영역에서 댓글 작성/수정/삭제를 지원한다. 권한이 없는 사용자는 액션 버튼이 비활성화 또는 숨김 처리되어야 한다.
- 입력:
  - 거래 ID, 사용자 ID, 수정 요청 데이터(금액/카테고리 등 변경 내용), 삭제/복제 액션 타입, 댓글 내용/댓글 ID
- 출력:
  - 수정/삭제/복제 결과(성공/실패, 실패 사유), 갱신된 거래 상세 데이터, 댓글 목록(작성자, 내용, 시간), 실시간 알림용 댓글 이벤트(선택)
- 우선순위: 상
- 관련 화면 ID: SCR-TRN-02-DETAIL
- 비고: TRN-014(보기)와 분리, 액션/권한 로직 담당

---

## 카드/할부

### CRD-001

- 기능명: 카드 할부 거래 입력
- 기능 상세설명:
  - 카드로 지출 거래 입력 시, 할부 개월 수와 무이자 여부를 선택할 수 있게 하는 기능. 1회 ~ 12/24개월 등 옵션을 제공한다. 할부로 저장하면 내부적으로 “원 거래 + 할부 스케줄 정보”를 함께 저장하고, 추후 월별 할부 분할 거래를 생성하는 기준 데이터로 사용한다.
- 입력:
  - 거래 입력 시: 결제일, 결제 금액, 카드 자산 ID, 할부 개월 수, 무이자 여부, 메모
- 출력:
  - 저장된 카드 결제 원 거래(총액), 연결된 할부 스케줄 정보(총 개월, 남은 개월, 월별 상환 예정금액), 향후 자동 생성될 분할 거래의 계획 데이터
- 우선순위: 상
- 관련 화면 ID: SCR-TRN-EDIT, SCR-CRD-DETAIL
- 비고: TRN-001(거래 입력)을 카드/할부 측으로 확장

---

### CRD-002

- 기능명: 할부 스케줄 분할 생성/관리
- 기능 상세설명:
  - CRD-001에서 저장된 할부 정보에 따라, 매월 결제일에 할부 분할 거래를 자동으로 생성하는 기능. 각 분할 거래는 해당 월 고정비/카드 지출에 포함된다. 남은 회차/잔액을 관리하고, 중간에 일시 상환/취소 시 스케줄을 재계산한다.
- 입력:
  - 카드 할부 원 거래 ID, 할부 개월 수, 시작 결제일, 월별 생성 시점(스케줄러), 중도 상환 이벤트
- 출력:
  - 생성된 분할 거래 목록(월별 금액, 회차 정보), 각 할부 케이스의 남은 회차/잔액, 중도 상환 시 조정된 남은 분할 거래/잔액 데이터
- 우선순위: 상
- 관련 화면 ID: SCR-CRD-SCHEDULE, SCR-RPT-BUDGET
- 비고: 예산/고정비와 연동

---

### CRD-003

- 기능명: 할부 현황 요약/리포트
- 기능 상세설명:
  - 현재 진행 중인 모든 할부의 잔여 금액, 월별 부담액, 이번 달/다음 달 할부 합계를 보여주는 요약 화면. 대시보드 위젯 또는 별도 화면에서 “이번 달 고정적인 할부 지출이 얼마인지” 한 번에 확인할 수 있게 한다.
- 입력:
  - 사용자 ID, 진행 중 할부 목록(잔여 회차, 잔여 금액, 월 상환액), 기준 월(이번 달/다음 달 등)
- 출력:
  - 이번 달/다음 달 할부 총액, 각 할부별 요약(가맹점명, 남은 회차, 남은 금액), 전체 고정비/변동비 분석에 사용할 할부 관련 통계
- 우선순위: 중
- 관련 화면 ID: SCR-CRD-OVERVIEW, SCR-RPT-HEALTH
- 비고: RPT-008(재무 건강 점수)와도 연결 가능

---

## 정산/모임

### STL-001

- 기능명: 정산 그룹 생성 및 기본 설정
- 기능 상세설명:
  - 여행/모임 등 정산이 필요한 비용을 관리하는 정산 그룹(그릇)을 생성하는 기능. 그룹 이름, 설명, 정산 기준(균등/비율)을 설정하고, 특정 태그(예: #봄여행)를 그룹과 연결하여 해당 태그가 붙은 거래만 정산 대상에 포함시킨다. 이 요구사항은 “그룹 자체를 만드는 것”에 집중하며, 멤버 추가/관리 로직은 STL-004에서 다룬다.
- 입력:
  - 그룹 이름(“2025 봄 제주여행”), 설명, 정산 기준(균등/비율), 연결 태그 리스트
- 출력:
  - 생성된 정산 그룹 ID, 그룹 기본 정보(이름, 설명, 정산 기준, 연결 태그), 이후 거래 필터링에 사용할 조건 정의
- 우선순위: 중
- 관련 화면 ID: SCR-STL-GROUP
- 비고: 공유 가계부/태그 리포트와 연동

---

### STL-002

- 기능명: 정산 계산 로직
- 기능 상세설명:
  - STL-001에서 정의된 그룹 기준에 따라, 각 멤버별 실제 지출 vs 부담해야 할 금액을 계산하는 기능. 결과로 누가 누구에게 얼마를 보내면 되는지 최소 송금 횟수로 정리한다. 지분 비율(예: 2:1)이나 특정 사람은 제외(차량 제공 등) 같은 옵션도 추가 가능하다.
- 입력:
  - 정산 그룹 ID, 그룹에 포함되는 거래 목록(금액, 지출자, 태그/카테고리, 통화), 정산 기준(균등/비율), 환율 정보(다중 통화 시)
- 출력:
  - 각 멤버별 실제 지출 총액, 부담해야 할 금액, 차액(+) / (-), 송금 관계 리스트(예: “A → B 23,000원”), 정산 완료/미완료 상태 플래그
- 우선순위: 상
- 관련 화면 ID: SCR-STL-CALC
- 비고: 정산의 핵심 계산 기능

---

### STL-003

- 기능명: 정산 결과 공유/상태 관리
- 기능 상세설명:
  - 계산된 정산 결과를 공유 멤버가 볼 수 있게 화면에 표시하고, 실제 송금 완료 후 체크/메모할 수 있는 기능. 예: “카카오페이로 보냄” 메모. 완료된 정산 그룹은 아카이브 처리하여 목록에서 숨기고, 필요 시 다시 열람만 가능하게 한다.
- 입력:
  - 정산 결과 리스트(송금 관계, 금액), 사용자의 완료 체크/메모 입력, 정산 그룹 상태 변경(진행 중 → 완료)
- 출력:
  - 정산 상태(진행/완료), 각 송금 항목별 완료 여부, 메모 내용, 정산 완료된 그룹 아카이브 목록, 대시보드 또는 그룹 리스트에서의 완료 표시
- 우선순위: 중
- 관련 화면 ID: SCR-STL-CALC, SCR-STL-LIST
- 비고: UX/협업 측면 강화

---

### STL-004

- 기능명: 정산 그룹 멤버 초대/관리
- 기능 상세설명:
  - 생성된 정산 그룹에 참여 멤버를 추가/수정/삭제하는 기능. 가계부 공유 멤버 목록에서 선택하거나 이메일로 초대할 수 있으며, 멤버별 부담 비율(가중치)을 설정할 수 있다. 특정 멤버를 정산 대상에서 제외하거나(예: 차량 제공자), 멤버 탈퇴/제외를 처리하는 로직도 포함한다.
- 입력:
  - 정산 그룹 ID, 추가/삭제할 멤버 ID 리스트, 각 멤버의 부담 비율, 초대 이메일 주소(외부 초대 시)
- 출력:
  - 갱신된 멤버 목록(닉네임, 비율, 참여 상태), 초대 상태(대기/수락/거절), 정산 계산(STL-002)에서 사용할 멤버·지분 정보
- 우선순위: 중
- 관련 화면 ID: SCR-STL-GROUP
- 비고: 정산 계산 로직(STL-002)과 연동

---

## 거래템플릿

### TMP-001

- 기능명: 거래 템플릿 저장
- 기능 상세설명:
  - 자주 사용하는 거래 패턴(예: “회사 점심”, “출근길 카페”)을 템플릿으로 저장하는 기능. 금액/카테고리/자산/메모/태그 등을 미리 채워둘 수 있다. 거래 입력 화면에서 “현 거래를 템플릿으로 저장” 버튼을 제공하고, 템플릿 이름/아이콘을 지정할 수 있게 한다.
- 입력:
  - 템플릿 이름, 기본 거래 타입(수입/지출/이체), 기본 금액(선택), 카테고리 ID, 자산 ID, 기본 메모/태그, 템플릿 저장 액션
- 출력:
  - 생성된 템플릿 ID, 템플릿 목록(이름, 아이콘, 최근 사용일), 특정 가계부/사용자에 귀속된 템플릿 데이터
- 우선순위: 상
- 관련 화면 ID: SCR-TRN-EDIT, SCR-TMP-LIST
- 비고: TRN-001(거래 입력) 확장 기능

---

### TMP-002

- 기능명: 템플릿 선택/적용
- 기능 상세설명:
  - 거래 입력 화면에서 템플릿을 선택하면, 해당 템플릿의 값으로 폼을 자동 채우는 기능. 날짜/시간은 현재 시각으로, 금액은 템플릿 값 또는 빈 값(사용자 설정)에 따라 처리한다. 모바일에서는 “빠른 입력” 바텀시트로 템플릿 목록을 바로 열 수 있도록 할 수 있다.
- 입력:
  - 선택한 템플릿 ID, 현재 시각, 현재 선택된 가계부/자산 정보
- 출력:
  - 템플릿에서 가져온 기본값이 채워진 거래 입력 폼(카테고리/자산/메모/태그 등), 사용 편의를 위한 최근 사용 템플릿 정렬 목록
- 우선순위: 상
- 관련 화면 ID: SCR-TRN-EDIT
- 비고: 빠른 입력을 통한 UX 향상 핵심 기능

---

### TMP-003

- 기능명: 템플릿 관리(수정/삭제/정렬)
- 기능 상세설명:
  - 템플릿 목록 화면에서 템플릿의 이름/내용을 수정하거나 삭제, 순서를 변경하는 기능. 사용 빈도 순/최근 사용 순 정렬 옵션을 제공한다. 삭제 시 기존 거래 기록에는 영향이 없고, 템플릿만 삭제된다.
- 입력:
  - 사용자 ID, 템플릿 ID, 수정된 값(이름/아이콘/기본 카테고리 등), 삭제 액션
- 출력:
  - 업데이트된 템플릿 목록, 삭제된 템플릿 제외된 상태, 정렬 순서(사용 빈도/수동 순서)에 따른 리스트
- 우선순위: 중
- 관련 화면 ID: SCR-TMP-LIST
- 비고: 템플릿 생명주기 관리

---

## 사용자

### USR-001

- 기능명: 마이페이지 진입
- 기능 상세설명:
  - 로그인한 사용자가 자신의 계정/가계부 현황을 한눈에 볼 수 있는 마이페이지 홈 기능. 기본 정보(이메일, 닉네임, 가입일), 내가 소유/참여 중인 가계부 리스트(이름, 설명, 참여 인원, 메인 여부)를 카드 형태로 보여줌. 이후 상세 수정·관리 기능으로 진입하는 허브 역할.
- 입력:
  - 현재 로그인 사용자 ID
- 출력:
  - 기본 계정 정보, 가계부 카드 목록(이름/설명/참여자 수/메인 여부), 가계부 초대 대기 건수 요약
- 우선순위: 중
- 관련 화면 ID: SCR-USER-01
- 비고: 기존 [ACC-003] 중 마이페이지 개요

---

### USR-002

- 기능명: 프로필, 닉네임, 비밀번호 변경
- 기능 상세설명:
  - 마이페이지에서 내 정보 변경 기능. 보안을 위해 변경 전 현재 비밀번호를 한 번 더 입력받는 모달을 띄우고, 닉네임 중복 검사 및 유효성 검사(2~10자, 특수문자 불가)를 수행. 비밀번호 변경 시 기존 규칙(8~16자, 조합, 강도 미터)을 동일하게 적용하고, 변경 후 기존 세션은 선택적으로 무효화.
- 입력:
  - 현재 비밀번호, 새 닉네임, 새 비밀번호/확인(선택), 프로필 이미지(선택)
- 출력:
  - 변경 성공/실패 메시지, 필드별 유효성 에러 (“이미 사용 중인 닉네임입니다” 등)
- 우선순위: 중
- 관련 화면 ID: SCR-USER-01-EDIT
- 비고: 기존 [ACC-003] 내 정보 변경 세분화, PNC-005 비밀번호 정책과 연동

---

### USR-003

- 기능명: 내 가계부 관리
- 기능 상세설명:
  - 마이페이지에서 사용자가 생성한 가계부 목록을 관리하는 기능. 카드에 가계부 이름/설명/참여 인원 표시, “새 가계부 만들기” 버튼으로 이름/설명/화폐단위를 입력하여 생성. 무료 플랜 기준 최대 3개까지 생성 가능. 삭제 시 가계부 이름을 직접 입력하게 하는 이중 확인 절차로 오작동 방지.
- 입력:
  - 가계부 이름, 설명, 화폐단위, 가계부 삭제 시 확인용 이름 입력
- 출력:
  - 가계부 목록(생성/삭제 반영), “최대 3개까지 생성 가능합니다” 경고, 삭제 성공/실패 메시지
- 우선순위: 중
- 관련 화면 ID: SCR-USER-LEDGER
- 비고: 기존 [ACC-003]의 가계부 관리 부분, SUB-003 플랜 기반 기능제한(가계부 최대 개수)과 연동

---

### USR-004

- 기능명: 메인 가계부 설정
- 기능 상세설명:
  - 여러 가계부 중에서 로그인 후 자동으로 진입할 메인 가계부를 지정하는 기능. 각 가계부 카드에 ‘메인으로 설정’ 버튼과 별표 아이콘을 두고, 선택 시 기존 메인 설정은 해제되고 새로 선택된 가계부가 메인으로 저장. 로그인 성공 시 항상 이 가계부의 대시보드로 이동. 메인 가계부 설정은 사용자 계정 단위로 서버에 저장
- 입력:
  - 선택한 가계부 ID
- 출력:
  - 메인 가계부 설정 결과, 가계부 카드에서 별표/라벨 표시, 다음 로그인 시 메인 가계부 대시보드로 리다이렉트
- 우선순위: 중
- 관련 화면 ID: SCR-USER-LEDGER
- 비고: 기존 [ACC-003] 수용조건 분리

---

### USR-005

- 기능명: 가계부 초대 수락 / 거절
- 기능 상세설명:
  - 다른 사용자가 [SET-004]에서 보낸 가계부 초대를 관리하는 기능. 마이페이지 내 “초대 관리” 섹션에서 초대 목록(가계부 이름, 초대한 사람, 권한, 초대일)을 보여주고, 각 초대에 대해 수락/거절 가능. 수락 시 해당 가계부가 내 가계부 목록에 추가되고, 거절 시 더 이상 표시되지 않음.
- 입력:
  - 초대 ID, 액션(수락/거절)
- 출력:
  - 업데이트된 초대 목록, 가계부 목록에 새 가계부 추가 여부, 수락/거절 결과 토스트 메시지
- 우선순위: 중
- 관련 화면 ID: SCR-USER-INVITE
- 비고: 기존 [ACC-003] ‘초대 관리’ 분리

---

### USR-006

- 기능명: 회원 탈퇴
- 기능 상세설명:
  - 사용자가 서비스 이용을 중단하고 계정 및 관련 데이터를 영구 삭제하는 기능. 마이페이지 > 내 정보 하단에서 진입. 강한 경고 문구 노출, 현재 비밀번호 재입력, “내용을 모두 확인했으며 탈퇴에 동의합니다” 체크, 선택적인 탈퇴 사유 수집 후 확정 시 데이터 삭제(또는 유예 후 삭제 정책) 수행.
- 입력:
  - 현재 비밀번호, 탈퇴 동의 체크, 선택적 탈퇴 사유
- 출력:
  - 탈퇴 처리 결과, 로그아웃 및 랜딩 페이지 이동, 이후 로그인 시 “존재하지 않는 계정입니다” 메시지
- 우선순위: 상
- 관련 화면 ID: SCR-USER-QUIT
- 비고: 기존 [ACC-004] 상세화, PNC-012(개인정보/로그 보존 정책) 준수 필수

---

## 온보딩

### UX-001

- 기능명: 온보딩 튜토리얼 오버레이
- 기능 상세설명:
  - 신규 가입자가 최초 로그인 시, 서비스 핵심 UI 요소를 하나씩 안내하는 단계별 온보딩 튜토리얼 기능. 반투명 오버레이로 배경을 어둡게 처리하고, “1단계: 카테고리를 설정해볼까요?”, “2단계: 여기서 첫 거래를 기록해보세요!” 등 단계별 설명과 강조 포커스를 제공. “건너뛰기”, “다시 보지 않기(이후 로그인부터는 온보딩 자동으로 건너뜀)” 옵션 포함.
- 입력:
  - 최초 로그인 여부 플래그, 사용자 ID, 현재 온보딩 진행 단계(1,2,3…), 사용자가 누른 버튼(다음/이전/건너뛰기/다시 보지 않기)
- 출력:
  - 각 단계에서 강조할 UI 요소 위치/텍스트, 온보딩 진행 상태(예: 2/3 단계), 온보딩 완료/중단 여부, “다시 보지 않기” 설정 값(다음 로그인 시 온보딩 표시 여부 결정)
- 우선순위: 중
- 관련 화면 ID: SCR-UX-ONBOARDING
- 비고: 기존 [UX-01] 기반

---

### UX-002

- 기능명: 온보딩 – 초기 데이터 설정 유도
- 기능 상세설명:
  - 온보딩 과정에서 최소 1개의 자산과 기본 카테고리 세트를 설정하도록 유도하는 기능. 자산 생성 모달, 기본 카테고리 자동 생성, 샘플 거래 입력 팁 등을 안내. 온보딩 완료 시점에는 사용자가 최소 1개 자산을 가진 상태가 되도록 한다.
- 입력:
  - 온보딩 플로우 단계 정보, 사용자가 입력한 자산 정보(이름, 초기금액 등), 기본 카테고리 세트 정의
- 출력:
  - 생성된 자산 1개 이상, 생성된 기본 카테고리 트리, 온보딩 완료 플래그(“이 사용자는 온보딩을 완료했다”), 대시보드에 표시할 “첫 거래를 기록해보세요” 안내 상태 업데이트
- 우선순위: 중
- 관련 화면 ID: SCR-UX-ONBOARDING
- 비고: [UX-01] 수용조건 분리 , CAT-008/AST-003과 연동

---

## 알림

### UX-003

- 기능명: 리포트 알림 설정 (주간/월간)
- 기능 상세설명:
  - 사용자가 주간 리포트, 월간 리포트 알림을 각각 켜거나 끌 수 있는 설정 기능. 설정 화면에서 토글 스위치 형태로 제공하며, 알림 채널(푸시/이메일)이 있다면 채널별 on/off도 선택 가능. 기본값(예: 월간 ON, 주간 OFF) 정책을 정의하고, 변경 사항은 사용자별 알림 설정에 저장.
- 입력:
  - 사용자 ID, 주간 리포트 알림 on/off 값, 월간 리포트 알림 on/off 값, 알림 채널 설정(푸시/이메일)
- 출력:
  - 저장된 알림 설정 값, 알림 스케줄러가 참조할 주간/월간 알림 활성화 여부, 설정 화면에서 토글 초기 상태
- 우선순위: 하
- 관련 화면 ID: SCR-UX-REPORT-SET
- 비고: 기존 [UX-02]의 설정 부분

---

### UX-004

- 기능명: 주간/월간 리포트 데이터 생성
- 기능 상세설명:
  - 지난 주/지난 달의 거래 데이터를 바탕으로, 요약 리포트 콘텐츠를 생성하는 기능. 총 수입, 총 지출, 지출이 가장 큰 카테고리 TOP1, 목표 달성 현황 또는 예산 준수 여부 등을 계산하고, 사용자에게 보여줄 텍스트/숫자 데이터를 구성한다. 이 요구사항은 “무엇을 보여줄지”에 집중하고, 실제 발송 스케줄/채널은 UX-005에서 담당한다.
- 입력:
  - 사용자 ID, 알림 설정(주간/월간 on/off), 분석 대상 기간(지난 주/지난 달), 해당 기간의 거래 집계 데이터, 목표(GOL) 및 예산(BUD) 데이터
- 출력:
  - 사용자별 리포트 요약 데이터(총 수입/지출, TOP1 카테고리, 목표/예산 상태), 알림 메시지 템플릿에 바인딩할 문자열/숫자 값, 상세 보고서로 이동할 링크 정보
- 우선순위: 하
- 관련 화면 ID: SCR-RPT-SUMMARY
- 비고: RPT-005, GOL/BUD와 연동되는 “데이터 준비” 단계

---

### UX-005

- 기능명: 전역 토스트 알림 인프라 구축
- 기능 상세설명:
  - react-toastify 등 라이브러리를 사용해 앱 전역에서 동일한 위치/스타일로 토스트 알림을 보여주는 인프라 기능. 최상위(App) 레벨에 Toast 컨테이너를 두고, notificationService를 통해 어떤 컴포넌트에서도 성공/오류/경고/정보 토스트를 호출할 수 있게 추상화.
- 입력:
  - 토스트 호출 요청(타입: success/error/warn/info, 메시지 텍스트, 옵션: 자동 닫힘 시간, 위치 등), 전역 설정(최대 동시 표시 개수 등)
- 출력:
  - 화면 우측 상단(또는 디자인 정의 위치)에 나타나는 토스트 UI, 자동 사라짐 타이머 동작, 큐 처리된 토스트 리스트, 공통 스타일(색상, 아이콘, 애니메이션 등)
- 우선순위: 상
- 관련 화면 ID: SCR-UX-NOTIFY-BASE
- 비고: 기존 [UX-04] 인프라 부분

---

### UX-006

- 기능명: 공통 API 오류 자동 토스트 처리
- 기능 상세설명:
  - Axios 인터셉터 등 네트워크 레이어에서 401, 403, 5xx 같은 공통 API 오류 발생 시 자동으로 토스트 알림을 띄우는 기능. 각 화면에서 일일이 에러 처리를 하지 않아도, 전역 수준에서 사용자에게 “네트워크 오류가 발생했습니다”, “권한이 없습니다” 같은 메시지를 일관되게 보여준다.
- 입력:
  - HTTP 응답 객체(status code, error message), 인터셉터에서 전달된 에러 정보, 현재 요청의 context(필요 시)
- 출력:
  - 에러 유형에 따른 토스트 메시지(예: 401 → “다시 로그인해 주세요”, 500 → “서버 오류가 발생했습니다”), 중복 에러 토스트 방지를 위한 디바운스/스로틀 처리 결과
- 우선순위: 상
- 관련 화면 ID: SCR-UX-NOTIFY-BASE
- 비고: 아키텍처/UX 중간 지점 기능

---

### UX-007

- 기능명: 성공/실패 사용자 피드백 표준화
- 기능 상세설명:
  - 거래 저장, 자산 생성, 카테고리 추가 등 주요 액션 후에 일정한 규칙으로 토스트 메시지를 보여주는 UX 표준화 기능. 예: 성공 시 “저장되었습니다.”, 삭제 시 “삭제되었습니다.”, 실패 시 “저장에 실패했습니다. 잠시 후 다시 시도해 주세요.” 등 공통 문구를 정의하고 모든 화면에서 재사용.
- 입력:
  - 도메인 액션 결과(success/fail), 액션 타입(create/update/delete 등), 옵션(도메인명: 거래/자산/카테고리 등)
- 출력:
  - 액션 타입에 따른 토스트 메시지(“거래가 저장되었습니다”, “자산 삭제에 실패했습니다” 등), 사용자에게 일관된 피드백 경험, 도메인별로 살짝 다른 문구를 적용한 최종 텍스트
- 우선순위: 중
- 관련 화면 ID: SCR-UX-NOTIFY-BASE
- 비고: UX-007 기반으로 사용하는 패턴

---

### UX-010

- 기능명: 주간/월간 리포트 발송 스케줄/채널
- 기능 상세설명:
  - UX-004에서 준비한 리포트 데이터를, 매주 월요일 오전 / 매월 1일 오전에 푸시/이메일로 발송하는 기능. 각 사용자의 알림 설정에 따라 발송 대상자를 결정하고, 실패한 발송에 대한 재시도/로그를 남긴다. 알림 클릭 시 관련 보고서 화면으로 이동할 수 있는 딥링크를 포함한다.
- 입력:
  - 알림 대상 사용자 목록(UX-003 설정 기반), 사용자별 리포트 데이터(UX-004 결과), 발송 스케줄 설정(요일/시간), 발송 채널 설정(푸시/이메일)
- 출력:
  - 발송된 리포트 알림 건수, 사용자별 발송 결과(성공/실패, 실패 사유), 알림에서 사용할 최종 메시지 텍스트, 보고서 화면으로 연결되는 URL/딥링크
- 우선순위: 하
- 관련 화면 ID: SCR-RPT-SUMMARY
- 비고: 알림 인프라/스케줄러와 연동

---

## 잠금

### UX-008

- 기능명: 앱/웹 가계부 잠금 설정
- 기능 상세설명:
  - 설정 화면에서 “앱 잠금” 기능을 켜고, 사용할 인증 방식을 선택하는 기능. PIN(4자리 숫자), 앱 비밀번호, OS 생체 인증(지원 시) 중 하나를 선택할 수 있으며, 잠금까지의 유휴 시간(예: 즉시, 1분, 5분 등)도 설정 가능. 설정 값은 로컬/서버에 암호화하여 저장.
- 입력:
  - 사용자 ID, 잠금 기능 on/off, 인증 방식(PIN/비밀번호/생체), PIN/비밀번호 값, 유휴 시간 설정 값(분 단위)
- 출력:
  - 저장된 잠금 설정 값(인증 타입, 유휴 시간 등), 잠금 사용 여부, 이후 앱 재실행/유휴 시간 경과 시 잠금 화면 표시 여부
- 우선순위: 중
- 관련 화면 ID: SCR-UX-LOCK-SET
- 비고: 기존 [UX-03] 설정 부분

---

### UX-009

- 기능명: 잠금 화면 인증
- 기능 상세설명:
  - 앱/웹이 재실행되거나, 설정된 유휴 시간 동안 사용이 없을 때 잠금 화면을 먼저 보여주고 인증을 요구하는 기능. 올바른 PIN/비밀번호/생체 인증 통과 시 메인 화면으로 진입, 인증 실패 횟수 초과 시 일정 시간 잠금 또는 추가 보안(재로그인) 요구 정책 적용.
- 입력:
  - 현재 잠금 설정(UX-005 결과), 사용자 입력 PIN/비밀번호, 생체 인증 결과, 실패 횟수 카운트
- 출력:
  - 인증 성공/실패 결과, 성공 시 이전에 보던 화면 또는 메인 대시보드로 이동, 실패 시 에러 메시지(예: “PIN이 일치하지 않습니다”), 실패 횟수 초과 시 추가 조치(잠금 타이머, 재로그인 요구 등)
- 우선순위: 중
- 관련 화면 ID: SCR-UX-LOCK-SCREEN
- 비고: 보안 + UX 혼합 기능

---
